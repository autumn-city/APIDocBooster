Welcome, everyone. This is Michael Gibbs,
and I'm the founder and CEO of Gokhan architects
and NGO called careers. And I'm here today
to have some real fun with you. We're going
to discuss BGP training. And this is really
networking for cloud computing. And whether
you choose to call it AWS BGP, or consider
this to be an AWS networking tutorial, or
even a discussion of what is BGP. The key
is we're going to discuss networking for cloud
computing. Whether you call that cloud networking,
training, or networking, and cloud computing,
or networking for cloud architects, this is
really essential stuff. It is critical network
skills training. And here's why. The cloud
is nothing more than a network in a data center
that's been virtualized. So the critical Cloud
Architect skills are knowing the network in
the data center. So when people ask me for
Cloud Architect career tips, I say, the network
and the data center, specifically, BGP IP
addressing subnetting super netting, so if
you want to be a cloud architect, if you're
looking to get a cloud architect job, or you're
looking for cloud career tips, we're going
to have a party with this AWS BGP training.
And this is really BGP for cloud computing.
I love BGP. I've worked with it now for over
25 years. I'm one of the original Cisco Certified
internet experts back when it was a two day
exam. And let me tell you, I have over 10,000
hours of BGP experience, spent nearly a decade
as the lead architect over at Cisco. And BGP
is what makes me happy. It's my absolute favorite
thing in the world. Before we talk about BGP,
and trust me, there's nothing more fun than
talking about BGP, I'd like to do just a little
bit of housekeeping. So first, everybody,
welcome. And if you're here, and you're having
a good time, type, hashtag, cloud hired, the
whole reason we do this is to get you a cloud
hired to type hashtag cloud hired. Chow, I'm
loving seeing you there with the blue wrench.
I'm so happy to see you there to buy us. I'm
happy to see you there a fantastic cloud heart.
So let's go over a few things.
Today, on today's question and answer session,
we decided to open up a flash sell. So currently,
until the end of this month, there's 28 days
in February. So we're decided to do a 28%
flash sale good until the end of January.
So if you're interested, please go and get
yourself cloud hired, join our community,
that's the coupon code. It's February Flash
20%. Off, we almost never do this. So help
yourself, get cloud hired, we'd love to work
with you, we'd love to hear from you. And
that's why we do what we do. Everything is
all about getting new cloud hired. So I love
seeing that cloud hired stuff. Additionally,
I wanted to let you know that tomorrow, we
have a webinar on how to get your first cloud
architect job. We will discuss what the hiring
managers desire. We will discuss how to skip
HR and get your resume directly in the hands
of the hiring manager. We will talk about
but just bear with me. I'm trying to mute
my phone because it keeps nonstop. We will
tell you exactly what you need to know what
is the technical competency, what you need
to do on an interview, what should be on your
resume, literally speaking, we will tell you
everything to get hired. And it's completely
free. So join us on Thursday for that, which
is tomorrow. And on Friday, to help you get
hired. Because everything is about getting
the guys cloud hired. We're gonna have a completely
free interview demo people typically paying
about $400 an hour for interview coach and
guess what? We're going to invite you all
for free. And we're going to give you interview
coaches. So apply, apply apply to be part
of this, Chris or my team. We'll put down
the signup link. Let's get every one of you
cloud hired. So now you know we're going to
talk about we're going to talk about BGP,
today, we went over the housekeeping. And
also one more last thing. We also have a completely
free AWS Certified Solution Architect Professional
book. It starts at this big day getting and
it gets you all the way to passing the exam.
There are a tremendous number of wonderful
people that worked in the putting that together
to help you all get nothing else other than
cloud hired. So please take advantage of it.
But today we're going to talk about BGP, or
the Border Gateway Protocol, which is my absolute
absolute favorite routing protocol in the
world. So to begin, what is BGP why Do we
use by BGP, and we're gonna have to get pretty
technical here. And I wish we didn't have
enough to put my hat on with the propellers
around it. But let's just say we're going
to get really geeky and really technical here.
And we just have no choice. We have to do
this. So BGP is a routing protocol. And why
do we use routing protocols? We use routing
protocols to build a map of our network, so
we can find the destination. So realistically
speaking, I want you to think about this.
If you want to call a friend on your phone,
you dial their number, right? The phone switches,
route the call to the right person, their
phone rings, and they say, hi, it's me, Mike.
That's all great, right? But somehow, the
magic in between was the routing. Now, there's
lots of ways we can set up our reality. We
can set it up where we can tell a router go
here, three, it's called static routing. What's
that light? Well, let's say I want to go visit
Chris. He's over in the Tampa St. Petersburg
area. Here I am just north of Palm Beach County.
So what do I do? I would look at a map. This
is a static route. And I would say, go up
by 95. North, make a left, make a right, make
a left make a right booth. I'm a Chris's help.
Great, right. Well, what happens if there's
some traffic on the road? What happens if
there's construction? If a roads blocked?
Well, if I have a static route, I am stuck.
I can get halfway to Chris's house, not nowhere
to go. I can't get there. Now, what if I got
in my car, and I said, Hey, GPS, take me to
Chris's house. And I'm on the way to Chris's
house, I'm in my car, I'm driving looks good.
I got my cat Cindy on my lap, because she
didn't go very far without me, driving to
Chris's house, and whoo, construction. My
GPS says rerouting mega left mega right like
a left, I don't get stuck. So in networking,
or in calls and voice over IP, or in routing,
we have to build a map to get to the destination,
we have a choice where we can manually configure
this. But that doesn't scale. Imagine talk
going to 30,000 routers in your environment,
and manually telling it each place to go.
And then said well go here. But if this doesn't
work, go here. But if this doesn't work, go
here. But if that doesn't work, go here. Could
you imagine doing this on 20,000 different
devices, you'd be lost? You just can't do
it. So what we need is we need that GPS like
functionality. How do I get my data through
the network. And with that, we need to build
them out. And that's called the routing protocol.
So we have lots of cool routing protocols
that can do it. And interior gateway protocols
and exterior gateway protocols. And we'll
talk about what they are.
inside of an organization, we run something
called an Interior Gateway Protocol such as
OSPF, or intermediate systems to intermediate
systems were 1,000,001 years ago, we use something
called eig RP, or EIGRP. Or rip, although
we haven't been using distance vector protocols
like that for ages. But the point is, it's
a routing protocol, hey, build a map. Now
inside of an organization, we have routing
protocols that are tuned for speedy, speedy,
fast. Why is it fast? Why does it matter?
Well, in a small environment, you got a cable
cut, you want to reroute around it really
fast. Right? So in our organizations, what
we need is this, we need speed, performance,
and rapid self healing. Now, that's great.
We want speed. Now what comes with speed?
Well, less scalability. So think about that.
Speed means less scalable, because we have
to do more stuff, more stuff. So kind of keep
that in the back of your mind. Routing protocols.
And to get ones are optimized for speed. They
send Hello messages really fast. They withdraw
routes really fast. They add them really fast
because we're looking for self healing. Know
in between organizations, we're looking for
scalability. So an Interior Gateway routing
protocol like OSPF has three or 4000 routes,
and that's about nail it's gonna survive nicely.
Whereas BGP can take it 800,000 routes from
10 different internet service providers and
I can scale BGP can let you tune it. I can
look there and I can say, Angelo, you got
access to the information. AJ, you have access
to the information I have access to the information.
By Kenya you do not know Kenya would get access
to all kinds of information. She's fantastic.
I know. But that's a point BGP gives me the
tunability to say, Jennifer can know about
it and Queen can't, but LM can know about
it. And Chris, can we get that tunability
so he gets scalability 800,000 rounds, versus
a few 1000. We've got tune ability. And we've
got a lot of what we like to call nerd knobs.
And we'll be playing with those nerd knobs
to energy, our traffic. And wow, the nerd
knobs are fun. And they're cool. But like
I said, I'm going to put on my geeky propeller
hat with the two propellers, because we're
gonna have to get a little techie over here.
Normally, I just discussed leadership and
emotional intelligence, other architecture
things, but sometimes, you got to get down
there, got our hands dirty and get Deki. And
we're getting techie here. So keep that in
the back of your mind. So the way routing
protocols build the map through the network,
and if you've not seen our CCNA Training,
attend that free bootcamp. It's live on our
channel. Please do that. But the way routers
have is routers have interfaces. They're like
arm like an octopus with a bunch of lives.
So the way it works is I've got data coming
in or it goes out another interface comes
into this side of me goes out the next side,
comes in from one interface goes out another
interface comes in from the bottom comes out
the top. And that's what the routers are doing.
They're making this list that list is called
the routing table. So that's what we're doing.
And that's what BGP is. And BGP is a dynamic
routing protocol. Well, let's talk about the
way BGP works. It's not like any other routing
protocol.
Normally speaking, you have routing protocols
that say hello to each other. Hello, hello.
Hello. And they automatically form a neighbor
relationship. Put two OSPF speaking routers
in the same subnet, they form an adjacency.
But two routers running CLNs routing or intermediate
system to intermediate systems, they formed
a relationship pop in some interfaces in the
eig RP and everybody forms neighbor relationships
and it's all perfect, not BGP. Say everyone
in these other devices, sends a hello via
multicast. Hello, and everybody says hello.
And they all say hello. And they all say hello
and they form neighbors, not BGP, BGP, you
must manually tell it who's who's gonna form
a neighbor, neighbor relationship. So think
about this. Interior Gateway protocols. IP
multicast one everybody. exterior gateway
protocol BGP, TCP. And guess what? test question.
TCP port 179 is what BGP uses TCP port 179.
Why did I say that twice? Well, yes, you will
see it on your exam. But more importantly,
what if you have a firewall between a BGP
router on one side and a BGP router on the
other side, if that firewall does not allow
TCP port 179 through, BGP will never established
a session, never establish a never establish
a peering relationship, never exchange routes.
So now, you know TCP is BGP port was 79. So
remember, normal routing protocols multicast,
BGP unicast, which means you must manually
manually manually specify who the neighbor
is, I want to connect to Kenya, and Kenya,
his IP address is 1234. I do a neighbor, neighbor
1234. And I put in her autonomous system number
and Malkin, you know, I could talk to each
other. But I'm going to manually specify that.
So think about this. Regular routing protocols,
they form neighbor adjacencies, not BGP, you've
got to manually tell it who you want to pair
with. So that automatically increases your
security. I have agreed to share information
with Can you Carl on the list, she and I are
sharing information, we've manually agreed
it. And I'm even going to protect I'm going
to use a form of authentication to see that
Kenya is truly Kenya because I don't want
to be accepting routing information. If she's
not really Kenya, I know Kenya. She's awesome.
She's trustworthy. She's one of my students.
She's an amazing cloud architect. So because
of that, I'm happy to exchange routing information
with her. Okay, so we talked about the point
of BGP. And we talked about it being TCP based.
We talked about the purpose of scalability,
we talked about the purpose of connecting
to external entities, such as Cloud providers,
or internet service providers, etc, etc. Now
we start getting into the weeds. Let's talk
about the messages that are sent between BGP
peers. Because these messages are critical,
we're going to be dealing with a couple of
messages, one of them is going to be called
an Open message. The next message is going
to be something called a Keepalive. Beyond
that, we'll talk about updates and we will
talk about notifications. And then we're gonna
get pretty heavy into the algorithm itself
because you're gonna have to know the algorithm
in order to traffic engineer the let's begin
with The Open messes. So remember, T BGP is
T c p. So what ultimately happens as soon
as the routers on both sides that are running
BGP establish a TCP session, both neighbors
send an Open message. So pretty much that
so you've got Kenya Carl on the other line,
we shake hands, that's part of the TCP session
negotiation. And I say, open Kenya, and she
says openly. Now, in these open messages that
are there, we're going to have some information.
We'll talk about the BGP version number, they
have to be the same. If I want to appear with
Kenya over there. Guess what, we have to be
using the same BGP version, hopefully, it's
version four, autonomous system number with
my autonomous system is 12345. And her autonomous
system this 56789, guess what? Well, now we
have an external or EBGP peering session,
if my autonomous number is 12345, and 10 years
autonomous system is 12345. Now we have internal
BGP, and the rules are completely different.
The next thing that's part of that Open message
is the home timer. And what is the whole time?
The whole timer is the maximum number of seconds
that can elapse before a router must receive
a Keepalive or an update message. So why?
So? You know, apparently, I have people know
me from the way I view a health check. But
here's what it's like, a BGP speaker is going
to send a hey, are you there message? And
the other one's gonna say, Hey, I'm here,
hey, are you there? That's kind of like a
Keepalive. Make sure this session is up. So
you know, when you're dealing with these kind
of things, you know, kind of keep that in
the back of your mind that everything has
a hold time, whether it's a health check on
DNS, whether it's a health check with regards
to the load balancer, it's all the same. Hey,
are you there? Yes, I'm here, area there.
Yes, I'm here. And there's also in the Open
message going to be a BGP identifier. Hey,
that's the IP, that's basically the highest
loopback address that's on the router, or
whatever you tell it to be. So that's neither
here nor there. But so Open message, hello.
I'm here, oh, I'm here. Here's my BGP type
version number. Here's my autonomous system
number. Here's how long I'm willing to wait
without having a message to do something.
And here's my BGP identifier. So that's kind
of like the open negotiation. That's kind
of like the beginning of something. No, Kenyan,
I established a peering session. She shared
some routes with her organization. I've shared
somewhere else supply organization, everything's
great right? Now, periodically, maybe it's
every 10 seconds, or periodically, Kenya says,
I'm here. Mike, are you there, Mike? And I
say I'm here in Kenya, are you there, Kenya?
And she says, I'm here. And I say good. Kenya.
Anya, are you here and she says, I'm here.
Now if she doesn't respond, or I don't respond,
we're gonna ultimately tear down that neighbor
relationship. And we'll talk about that later.
But the key is, we have to make sure that
the session is established. And apparently
my microphones are still off my shirt. Bear
with me for a second. Put it back on. I knew
I was hearing some strange sounds. So kind
of keep that in the back of your mind. So
what will happen is that the peer doesn't
send a Keepalive neighbor relationship goes
down. Wait, DNS kit health check. Are you
there? Are you there? Are you there? No response.
Switch over to something else. Load Balancer.
Are you there? Are you there? Are you there?
Yes, I'm here. Good. Are you there? Yes, I'm
here. Are you there? No. Are you there? No.
Are you there? No. Remove the server. It's
the same thing. So Granta, when we talk about
load balancers, and health checks, and DNS,
it makes us feel like it's exciting. BGP,
did this 30 years ago, it's not new. The house
check cuts up all of this stuff. All this
cloud stuff is old networking things. And
that's why we love BGP so much. Not only is
BGP a critical Cloud Architect skill, but
it's your critical network engineer skill.
It's needed everywhere. So we talked about
the Open message, which identifies who you
are. You talked about the keepalive, the live
message being kind of like a health check.
Hey, I'm here. Hey, I'm here. Now let's talk
about an update message. So Kenya and I were
peers. She's sending the information. I'm
sending her information. Hey, wait, I just
lost a route to a subnet. I don't want to
send Kenya information to a subnet that I
can no longer reach. So I sent a withdrawal
message. I've got access to a new subnet.
Guess what? I'm gonna send it back. I really
that's what we're looking to do. Sorry, Kenya,
you popped in and you responded to one of
those things. I used you as an example, but
can use a phenomenal Cloud Architect. She's
got some good networking knowledge and a lot
of knowledge and a lot of places so I don't
think she'd mind. So that update message is
really talking about new things, got a new
route, last route got a new route last route.
So how does it work? We form an adjacency.
We do this by basically sending an Open message.
Hello, are you there? Hello, hello, hello,
we agree to our terms. After that's negotiated,
then we send keepalives. I'm here, I'm here,
I'm here, I'm here. And then after that, what
do we do, we get a route that gets moves away,
we withdraw it, we add it, we withdraw it.
So these are the kinds of things see can use
over there saying she doesn't mind at all,
I wouldn't pick up somebody's name that I
didn't think would be pretty happy. So you
know, here's what we're doing when we're talking
about the message types in BGP.
So, we're gonna talk about neighbor relationships
next. And we will, and we're gonna get involved
in a lot of hands on practical architectural
work, where before, but we're gonna have to
get through another techy section. So let's
do this. I want to cover this message. I'm
going to open it up for a few minutes for
questions. And then after that, we'll get
back to the content. So let's Lastly, talk
about the notification message. So can you
and I are having our conversation and something
everything is good, we're happy, we're happy.
And then something happens funny. Well, this
is when a notification messages sir. So maybe
I'm trying to speak BGP for to Kenya who's
speaking BGP three, well, that's not going
to work. So we've got to have something. So
what happens, there's a concept of a notification
message where if anything goes wrong, it just
closes the session. That's the way it works.
If anything goes wrong, it just closes the
session. So we're going to take some questions
from the audience. If you're having a good
time, if you could hit that like button, if
you could subscribe and hit the bell, we have
a lot of special stuff coming for you very
soon. And if you hit that bell, you will be
notified of it. So before I get in too much,
because the next section we're gonna get into
is pretty, pretty, pretty techie. And it's,
we're gonna have to do to get to turn our
inner geek on to do it. And I think it's fun.
But I just want to make sure that we give
you everything that you need. So does anybody
have any questions for me? Before we move
on? Chris, were there any that you saw?
Well, we haven't had any questions just yet.
So while we wait for some questions to come
in, if there are any, I'll let you remind
them about tomorrow on Friday again.
Okay, sounds good. So let everybody know,
tomorrow, we have a completely free how to
get your first cloud architect job webinar,
people come all over the world to these things.
We tell you how to leverage your past experience
to get yourself your first cloud architect
job. And we talk about how to show the hiring
manager, you actually have experience based
upon what you've done in your past life. We
talk about the actual job and how to become
competent in that job. We talk about how to
skip HR and have your resume seen by the hiring
manager. We talk about what needs to be on
your resume, you know what else we talk about?
How do they come the hiring managers dream
hire, because when you're what the hiring
manager wants, they hire you, and they'll
pay you a lot more. So we give you all the
tools on this completely free webinars so
you know how to get hired. And then on Friday,
we're going to have a completely completely
completely free interview practice session,
we'll bring you in, we'll interview and we'll
tell you what you need to do better, or will
tell you if you're ready. And by the end of
that session, you'll know if you're ready
to get cloud hired. So, Chris, I think I see
one question from Dan qGC is BGP exclusive.
Men, she says, I mean, is the only protocol
used all over the internet Danika? Well, let's
talk about this. There are a lot of protocols
that are used on the internet inside of an
organization, all organizations, they will
have their own Interior Gateway Protocol,
which means if you go to an Internet service
provider, there going to be running OSPF,
or intermediate system to intermediate systems
and that provider. Now the next thing they
will do is inside of that, they will run EBGP
to external providers. And they will also
run iBGP across their network to take the
routes that say somebody learned via Verizon
to then pass them off on to say NTT. So in
the internet, we're going to be in our internet
service providers, they're going to be running
an Interior Gateway Protocol, which will be
OSPF or intermediate systems, intermediate
systems. In addition to that, they might be
running MPLS, which is label switching or
tag switching. They might also be using RSVP
signaling to determine if enough bandwidth
is there to create a pseudo wire or custom
network. So now there's a lot of routing protocols
that we're going to be using. But it's always
gonna be BGP to connect one entity to another
entity that's external. And we're always going
to be using our own interior gateway protocols
internally. But we might be routing on lat
tags or labels. via MPLS, we might be signaling
tunnel creation via MPLS tunnels with something
called Resource Reservation Protocol. For
example, if a child is over their child, fantastic.
She's one of my amazing students just got
back from visiting her family of Vietnam.
But He's really amazing. It does amazing things
each day. And what I mean by that is if I
want to create a 10 gigabit pseudo wire, between
me and Chow over there, if the network can
only support one gigabit, I can't create a
10 gigabit pseudo wire, I mean, I could, but
it would only get one gigabit of bandwidth.
So we also then could use signaling protocols
such as resource reservation to say, to see
and signal and reserve the 10 gigabits that
we need for the network. So there's lots of
routing that we do on the internet, or do
some software defined networking, which is
the separation of the control plane and the
data plane. So it's not the only protocol.
But if the only protocol that's used to connect
entities to each other, so, company wants
to connect to three internet service providers,
they run BGP to Verizon, they run BGP to NTT,
they run BGP to CenturyLink. They run BGP
to at&t, they taken all the routes from all
the providers and then they determine the
best path. But at&t might be running OSPF,
whereas Verizon might be running well, Ryzen,
probably running OSPF and, and NTT, or I'm
sorry, CenturyLink, is running intermediate
system to intermediate systems. So there's
not so kind of keep that in the back of your
mind. Cloud hired? Yes, cloud hired denka.
Middle listen, you love gokada Millicent,
when you came to our program, it was such
a wonderful experience. You came in, you joined
us, you made an impact on everyone. But I
gotta tell you, that photo of you with the
tiger, that's just that you that you use Zoom,
that's the best I've ever seen.
Fantastic. What Security does BGP use for
connecting one entity with the other? Well,
for one thing, Angelo? That's a great question.
I have to say that I want to connect you Angelo
and I have to do it. Now we can also use authentication
and D five authentication, which is not the
most greatest thing, but we can use authentication
forms to also determine that you are what
you say or so we manually use it. And we've
got authentication that we can use to authenticate
the peer on the routing updates. Great question
there. Angela. Is BGP open source. BGP is
specified by the Internet Engineering Task
Force as an open protocol. So yes, now granted,
Juniper on their devices, and Cisco may also
have some proprietary enhancements if you
turn them on. But here's the thing. The thing
is quite strict, quite, quite frankly, this,
BGP is an open standard. And that's why we
use it because it works on Cisco routers,
and juniper routers, and Palo Alto firewalls,
and Fortinet firewalls. So BGP is very open
source. It has been in fact, anytime we're
dealing with these things in the cloud, we
have to use open source, especially when you
want to use multi cloud.
There's different versions, Robert, there's
always there's always a new iteration of BGP
three, four, who knows there'll be a BGP five,
it's just a matter of when they're all almost
the same. But with each feature upgrade, you've
got more functionality. So generation two,
cell phone technology, generation three, generation
four, generation five, it's just that kind
of thing. It's new version of the old thing.
Chris, you want to become the next 1x Be LMA?
Why do architects need to know BGP? Well,
x, be LMA? You can't work as an architect,
if you don't know routing? What is the cloud?
It's a network in a data center? How do you
design servers to talk to each other, you
need a network without a network, nothing
talks to each other. So it can't be done without
BGP. So if you don't know how to get your
traffic from the data center to the cloud,
nothing will happen. You must use BGP if you're
going to use a private line to the cloud.
And reality is if you don't know BGP, and
you don't know how to get the routing your
users and you won't be able to reach the cloud.
So again, they won't be able to do it. And
when they can, what's going to happen is the
routing will be wrong, which means your traffic
won't get to its destination, which means
your systems will crash. So architects need
to know BGP because architects design and
when you design a network, you must know BGP,
same reason you need to know IP addressing
same reason you need to know switching. Same
reason you need to know not same raising,
you know, VLANs etc, etc. you if you don't
know what it is, you can't design it. You
can configure things that you don't understand,
but he does know configuration commands but
you can't design what you don't know. Why
don't we do it? Cloud architects, we design
and take things from the network in the data
center to move to the cloud, which is another
network in a data center. So that means if
you don't know networking, and you're trying
to put something into a network, you can't
do it. So that's the reason architects need
to know BGP, everything we do is about networking
and data center technology. Take 1000 virtual
machines from the network, moving to the cloud,
take these 50,000 subnets and migrate some
of them to the cloud. It's all the same. So
we must know networking. If we want to be
a cloud architect.
Juice world, what makes a protocol BGP? Well,
what makes a cat a cat? What makes a doctor
a doctor? What makes a bear a bear? What makes
a lawyer a lawyer? The protocol is BGP, there's
a specification, you can see all the BGP specifications
on the ietf.org page, somebody writes a specification,
and then all the vendors make a protocol that
meets that specification, and it tells you
how they should say hello to each other, how
they should send the routes, the kind of message
that are between them, these are the critical
critical time of things that makes that there.
But if a protocol is written as BGP, it'll
be BGP. Kind of, like, if you were a manufacturer,
if you're going to make a car, he'd make it
a car if you were gonna make it a truck, you'd
make it a truck. Side BGP is always used for
while all routing protocols are used for high
availability, and it will, it will permit
failover of a physical interfaces down, it
will pit failure if lots of interfaces are
down, it will reroute around it. So it's like
your GPS ie that will get you to the ultimate
destination great perspective. Whose determines
the bad path? Well, BGP will determine on
its own unless you do traffic engineering,
which we're going to do later today Sebastian
and that is a fantastic trout question. Are
they backwards compatible? They usually they
usually negotiate back down. Good question
there jump. BGP is a TCP based unicast protocol
unicast means it must be point to point a
great question. Other routing protocols Cino
are like like OSPF which says a hello on two
two 4.0 dot 0.5 and two to 4.0 dot 0.6. For
the Dr. The Dr. Routers backup the Rs. So
you know that's multicast. So that can be
point a multicast point. But this is always
going to be pointed point because it's unicast.
What is BGP depth? That's a great question.
So I want you to think about this. Let's imagine
we've got a network. And we want it to scale.
And how do we scale it reduce the calculations
the network would do. So for example, if we're
an Internet service provider, and we've got
8 million routes on her router, 800,000 from
10 entities. Now let's assume that one entity
had a couple of bad networks and the routes
were going up and down, up and down, up and
down, and up and down, segments were coming
up and down. And it was so much that could
easily overwhelm all of our ability to calculate
these 8 million routes. So by doing that,
we can basically say if routes get a little
ugly, and they start to get a little cuckoo,
just don't pay attention. So imagine you've
got a child. And your child basically cries
are unhappy, you fix it. But let's say the
child is unhappy, you check, they're not sick,
they're not hungry, they got their favorite
toys, they've got their favorite clothes,
they have everything they want, and they're
still crying. And you just ignore them for
five minutes. And they get better, but kind
of really what's going on. And that's the
same thing that's going on with BGP dampening,
you're telling the routers, hey, we're getting
a lot of noise, a lot of noise, a lot of noise.
Don't pay attention to it for a few minutes.
And then see if it's still there. That's really
what dampening is, is designed to stop the
influx in and out, in and out, in and out,
in and out in and out. So kind of keep that
in the back of your mind. We can see how far
the so let's get back to the content. There
are other questions which we'll try and actually
do, but we're gonna keep it to either networking
or career. Things like containers are way
outside of the scope of networking. We'd love
to talk to you about them and we're happy
to but we've got to keep it somewhat relevant
so now, let's talk about how BGP forms the
neighbor relationship and as such Guess what,
we're going to talk about a lot of states
in something called the finite state machine.
We're going to be talking about the Idle state.
The Connect state, the active state, the open
sent, open, confirmed and established and
you know, what you want to see when you're
dealing with BGP established if you give me
see established, life is good, but let's talk
about this. Idol. So as soon as I put router
BGP 12345, neighbor, 1234, remote a US 1234567
or whatever. As soon as I do that, the routers
are going to attempt to start a TCP connection
or wait for a TCP connection in that state.
In that state. Only then are we idle? Why
are we idle? We are idle because of the following.
We are idle because the TCP session hasn't
been set. So if you configure BGP, and you
miss configure BGP, guess what happens? Go
back to idle, because you won't form that
relationship. Now let's talk about connect.
So what is connect? Assuming both BGP speakers
on both sides of the equation, establish a
TCP connection. We're now in Connect state.
And here's what happens. As soon as we establish
that TCP session, why don't we do we send
that Open message that we talked about before,
open up, let's form a neighbor relationship.
So we start out as IDL, we get to connect
and we send an Open message to our neighbor,
whoo, things are working good. And if this
occurs, we get in transition to open sent.
And wow, this is good stuff. Now, let's pretend
that doesn't happen. So we go, we establish
our TCP connection, we send open and transmission
open send. But if the TCP connection is not
success, successful, we kind of try and figure
out how to create the TCP connection, right?
And what's going to happen is BGP is going
to continue to listen. And it's going to transition
to the state called active act is not great.
It's a transitional state. So all good, we
connect TCP session, we send an Open message,
we go to open set, this is what we want. Now,
if not, what ultimately happens is going to
be as follows. We'll transition active. And
while we're an active, we're going to have
a connect retry timer. And it's going to try
and get us to keep sending, keep connecting
and establishing a TCP session. Now, if it
does, and we're good, we go to connect, and
then we send the Open message and transition
to open sent. But if we can't for any other
reason, we go back to idle. So idle is the
initial state, or if something bad happens,
so idle, is either the beginning or not good.
If you just do BGP, and you do show ip BGP
neighbors, and it says idle, guess it's okay.
But if it stays idle, after a minute, you
got a problem there. So it's a matter of knowing
what's going on and when. Now, active, as
I mentioned previously, when we go to connect,
and we send an Open message, and we go to
open set, this is good stuff. But if it doesn't,
we hit this active state. Now this again,
I want to make sure it again, because the
active state really made it hard for me when
I started with BGP 25 years ago, the active
state is this transition state is sort of
waits and either goes back to idle, or it
goes to open sense. So either back or forward.
And that's pretty much all based upon how
fast that TCP session came up. And whether
that open sent over a message was sent and
received. But let's say it all works. Well.
Start out at idle, and we go to connect, we
send it open message and we transition to
open said, This is what we want good news
here, open send. So in this date, we've sent
our open messages. And when everybody receives
the Open message, we check all fields. If
an error word exists, we'd send a notification
and kill the neighbor relationship. But if
it's good, now we're here. Now at this point,
after the Open message is sent, we're going
to send keepalives Hello, are you there? Hello,
are you there? I'm here, you're here. I'm
here. You're here. Let's have a conversation.
And that's really the way BGP works. So you
We send the open, we send the keepalive. And
we get the keepalive. Back. And now where
do we go? Right now we're an open confirm,
and we're going to transition to as diabliss.
Established is as good as it gets. That's
the full handshake. I give the person route,
they give me routes. We're exchanging routing
information. And we are happy, happy campers.
I give my routing information, I get my routing
information. This is as good as it gets. And
letting you know, I know, we're all really
geeky and academic here right now. But we're
going to spend an hour or two doing whiteboard
sessions we'll walk through, it'll be a chalk
talk. That's where the fun comes. But I got
to get a little geeky. That's what about my
hat with the propellers on today? Once we're
established, I'm all happy, because that's
when we send our routing information. So we're
using BGP because it's so flexible, and it's
so tuneable. That's why we use it. Scalability
to build the flexibility, this stuff is crazy.
And what enables us to do this are the attributes
that BGP carries. So BGP carries a lot of
attributes about certain routes and network
layer, reachability information. Cool, cool,
cool stuff. We'll see that the path, and the
path is going to determine how your routes
got there, which autonomous systems will be
able to see things like a local preference,
the way and a way, we'll be able to see the
origin code of the route and all kinds of
cool, cool, cool, fun stuff. And those are
our Nerd knobs that we're going to play with
them. They are really cool. And they are really
fun. And of course, that's the fun. That's
the party time. That's the whiteboard it out.
And that's the stuff that the cloud architects
need to know. Because you got to direct connections
to the cloud. You don't want your traffic
going out and at&t direct connection and coming
back on Horizon when you have out of order
packets and your systems will fall apart.
So we caught architects need to know two links
to how to load share across your links without
blocking one hack on the intro to in the AWS
advanced network, which is kind of like an
intro to an intro to an intro to an intro
to an intro to an intro to an intro to junior
level networking. They tell you to just block
one link because they don't assume you know
how to do it. But guess what? Customers don't
pay for links to not use them and they want
to use them. So kind of keep that back. Turgeon.
I'm so happy to see you here, Abigail marks,
I see you here with that blue wrench. Thank
you so much. And thank you, everybody out
there with the blue wrench for helping out
I really do appreciate it. So now that we
know this, now let's really talk about what
we can do, because we're going to manipulate
them inbound and outbound later. We're gonna
have fun with that. That's really the fun
stuff. So just remember that these attributes
talk about things. So let's talk about what
our attributes are. Well, for one thing, there's
an origin attribute, and origin attribute
origin attribute. So that's how we learned
the route. Did we learn the route because
we redistributed from OSPF and BGP meaning
we learned from our IGP? Did we learn it from
an EBGP like BGP? Or is the information and
complete and you know what, we can tune this,
we can create a route map, and we can change
the origin code to make a route more preferred
or less preferred. One of those little nerd
jobs we get to play with.
Brandon, I would say the AWS advanced networking
is like an intro to an intro to an intro to
an intro to an intro to a junior level version
of the CCNA class. So Brandon, I think you
could pass that without even reading the book.
So the next BGP attribute we're talking about
is the A S path. Now, what is the A S path?
It's the autonomous systems or organizations
that you have to cross to get to there. So
for an example, Brandon Bowman's over there,
he's over there in Georgia. Let's say he works
for the Brandon intermediate internet service
provider. Brandon's a great guy. So Brandon
owns Brandon's ISP. Now Brandon's ISP is good
friends with Abigail marks ISP, who is also
good friend with Charles ISP. I think you
all have blue wrenches over there. Ciao, Abigail.
So here's what would happen. I connect to
brand, right. Brandon has some routes that
he learned from Avago. But Brandon sends me
the route. So let's say Abigail's autonomous
system is 12345. And Brandon's autonomous
system is 6789 10. So what happens is As Brandon
learns a route from 12345, and he then sends
me the route that Brandon is 6789 10. So by
the time I see a route, it's got an AAS path
or the path that it came through 12345 and
6789. So I know that I am two Internet Service
Provider hops away. So what do you think BGP
prefers to shorter number of internet service
providers that it's got to hop through to
the destination. So the AAS path, generally
speaking, the shorter the AS path, the more
preferred the route, but there's a decision
tree. And it's the algorithm that determines
how we do this, and we will have a party with
that. The next attribute is the next hop,
this one, this one is critical. This one over
here, if you don't get this, right, this will
break everything. If the next hop is unavailable,
the router won't put it in the routing table.
So what do we mean by that? The next hop is
1.2 dot 3.4. If I can't reach one, dot 2.3
to four, every route that Brandon told me
is thrown away to the next hop attribute.
So which attributes that we talked about so
far, we talked about the origin attribute,
which is how we learned it. We talked about
the path attribute, which is the which number
of what are the ISPs we came through. And
we talked about the next hop attribute. Now
this one, this was the easiest way to manipulate
the outbound traffic on Cisco routers, and
this was very Cisco proprietary. Other organizations
are now supporting weight because the patent
ran out. Weight is locally specific to the
router. Generally speaking, the greater the
weight, the more preferred the outbound traffic
goes, the greater the weight, the more preferred
the outbound traffic goes. So now, let's talk
about the path selection process. You get
this, you know, BGP, so what is it if the
next step is not reachable, don't put it in
the routing table. What do we know the next
hop has to be reachable to prefer the path
with the highest weight. Next, if your weights
are equal, prefer the path with the highest
local preference. So highest weight, highest
local preference. If the local preferences
are the same, Prefer the route that was originally
low look that was originated locally on the
router. Meaning when you did because it's
more reliable. Now if the local preference
is the same, and no route was looked at look
locally originated Prefer the route with the
shortest path. Now if the AS path is the same,
prefer the path with the lowest origin code,
meaning the IGP is lower than the EGP, which
is also lower than in complete.
Now, if our origin codes are complete, we're
going to prefer the path with a lowest Med,
otherwise known as multi exit discriminator,
meaning exiting our autonomous system. And
of course, it's imagined the same. We're gonna
prefer an EBGP route over an iBGP route. But
yeah, okay. And then we now we're starting
to get into the simple nonsense, because we've
got to have a winner if the routes are still
equal, Prefer the route with their shortest
path to the next hop. And then if the routes
are still equal, prefer the packet was received
first, this makes you more stable because
you're not fluttering back and forth, kind
of like BGP dampening. And then, if the routes
are still equal, per further route, advertise
from the neighbor with the lowest IP address,
like I said, this is where it gets ridiculous.
Because you've got to have an election winner,
and you've got to have something. So hold
this path, that kind of thing. So now you
know the BGP decision tree, I'm going to go
over one more time, choose the path with the
highest rate. If the weights are the same,
choose the path with the highest local preference,
that's the same, choose the route that the
local router originated. If that's the one,
choose the one with the shortest path. If
that's all the same, use the lowest origin
code IGP EGP versus incomplete. If they're
all the same, choose the path with the lowest
multi exit discriminator. Then prefer EBGP
over iBGP then pick the oldest route and then
one, the one with the lowest router ID, etc,
etc, etc. This is why it matters. So no, all
of these things matters. So now we're going
to get into the coolness and the fun but before
we do if you're having a good time, if you
can hit the Like, comment, subscribe and hit
the bell. Tell some friends to join us and
type hashtag cloud hired. Just because I saw
for us about knowing that you're getting hired.
That's why we do everything that we do. Let's
take some questions and then we're going to
break out into the party time. This is where
the funds going to be. Chris, if you want
to go through and check and see what kind
of questions exist before we get to the next
phase
as path is the number of hops, so the shorter
the shorter the AS path, the less number of
hops, absolutely. Mandara. Excellent, excellent,
excellent.
What kind of hardware do we have dedicated
to our Evie and gee server to become a BGP
guide like you? Is it worth buying a server
for Evie mg, or is it cheaper to sign up and
terminate EVM G and the Google Cloud? Well,
generally speaking, Eugene, I build my own
V and G server, I find it much cheaper for
me to do the things on my servers and use
the cloud. I did spec out running our business
on the cloud. We have 1024, core servers,
Eugene, that each have 128 gigs around Amazon,
when at $11,000 per month for the cloud, we
were able to build it for 10,201 time and
never have to pay for it again, as opposed
to the almost $400,000 That AWS wanted for
our service. And Google was about the same
price. So you know, it's up to that. So it's
a matter of what you need to do and when you
need to use them and what your use cases like.
So I use these servers, I use a Dell 7910
workstations. Because they have dual Xeon
CPUs, each one has 212 core CPUs on them,
some of them might have more bigger CPUs,
the least amount of DRAM, I haven't any one
of my servers is 128 gigs most up to 56. And
I typically use an NVMe drive in these things.
But you could use a couple of SSD drives in
raid zero, probably going to be cheaper just
to buy the server, use the server and keep
it because when you're doing some of these
things, you're going to need a lot of memory
and CPU cores. And that's when your cloud
servers get expensive. Plus, I'm going to
tell you this, that to set that server up
Eugene, it was not fun. It took a couple of
hours to do it. So it's not something you're
going to build on the fly. And then third
on the fly. percent. Why is BGP used over
the internet, because it's an open standard,
because it's the only routing protocol that
can handle the kind of route that the internet
has. It's the only thing all the interior
gateway protocols will die around 510 1000
routes. And the Internet has about 800,000
routes. And we need to get that from 10 Different
plus service providers in our routing. So
that's the only routing protocol we can use.
Once that was made mandar wait was applicable
only on Cisco routers. But it now works on
Juniper routers, it also works on AWS and
other cloud providers as well. It was only
good for Cisco, but it became more of an open
standard than the proprietary It was many
years ago.
You understand the algorithms, mad preference
and so on? Well, we're going to work through
that and verify that. But you want to understand
how these values are physically set who sets
them the network engineers do this? Absolutely.
And on the AWS cloud, the cloud engineer might
be doing this on the app, on your side, it
will be a network engineer on the datacenter
side. But on the cloud, it could be a cloud
engineer. And this is pretty standard. So
look at it this way. The Cloud Architect is
going to be the one that decides the traffic
pattern, or the network architect. But it's
the network engineer that configures the routers
that configures the BGP part that puts the
IP addressing thing that determines the router
ID that configures the BGP peering sessions,
the route maps, etc. The distribute list and
all that that's all the network engineers,
the engineers always are the ones doing the
setting. Always, always always
is this routers and automatically, yes, margin,
what's going to happen is you're going to
receive all this information, and it's going
to be processed by that decision algorithm.
And the routes will always be there and chosen
automatically. Absolutely. But we can tune
these attributes. Okay, so why do we need
an IDP? So, if you're going to detect a router
to a router, they have to be able to reach
each other. And if you don't have an Interior
Gateway Protocol You won't be able to have
your routers reach each other. So let's say
we've learned a million routes via BGP, we
can't put those million routes into OSPF inside
of our network, our network can't handle it.
So we need to use BGP to to keep the routes
and use iBGP to push them on our network.
Now, if you've got a router on one side that
has to connect to a router, another side via
BGP, and you don't have network layer reach
ability, you won't even be able to connect
the connections. So the Interior Gateway Protocol
is to provide network layer reach ability
for BGP to be able to do its magic, but it
won't work without an IGP, which is really
funny. Somebody wanted me to write a book
on Google Cloud networking. And they said
BGP is the only routing protocol. And I said,
not exactly. And they said, but you only use
BGP, and I said, Show me how you make BGP
work without AI without an IGP. And they said,
I've never set up BGP before. And I said,
Yeah, then you should not be reading a Google
Cloud networking book. And I want to write
it with you. But really, that's the key. And
you're new. So it's great. That's why we're
doing these kinds of things. We need the Interior
Gateway Protocol. So if I want to form a BGP
peering session with Abigail marks over there,
I need to be able to reach out become x to
be able to do it because TCP uses what TCP
uses what TCP port 179. So Abigail, Marcus
is two hops away. And I don't have an IGP
I can't reach her. I can't reach her. Not
the reason why.
The router determine what's in the routers
routing table. And the BGP table. Ruth absolutely
will be one of the things that populates the
routing table. Now the Interior Gateway Protocol
will also populate the routing table. But
the BGP table will be based on BGP learned
routes, and the table and we'll have lots
of fun with that Ruth will be determining
who the path is. And we'll have fun with that
in just a few minutes. Can I wait? Were they
connected within the core routers? Yeah, we're
going to absolutely do that. Mandor? Absolutely.
Yes, we need in order to use the inner in
order to use send any routing information
to anybody that's not ourselves, we have to
use BGP, whether it be a cloud provider Internet
Service Provider Absolutely.
OSPF or intermediate system to intermediate
systems, which is best for large scale networks?
Well, I'd like you to look at it this way.
intermediate system to intermediate systems
isn't even an IP routing protocol was designed
for CLNs routing long before IP actually existed.
Now with intermediate to intermediate systems
with work, what's so good about this is it
works well with a very large flat network.
So where everything's just a level one route.
So intermediate system to intermediate systems
scales really well, in a flat environment,
non hierarchical. So organizations that are
running MPLS often use intermediate system
to intermediate systems, because it enables
them to have a single flat network where the
link state advertisements carry a lot of data.
So there are two or three major service providers
throughout the world that are using intermediate
system to intermediate systems. CenturyLink
was one of them. They were the old level three
communications, but there are a few others.
OSPF is generally what most people use. And
it is a fantastic routing protocol that was
designed for IP. And it initially had the
type 1234 and five LSAS. They added the type
seven LSAS that were there for the knots of
stubby areas. And they've recently added multiple
additional LSAS carry MPLS based information.
I've worked with both I prefer to work with
OSPF but I will work with either and a good
network architect needs to know how to work
with both and deal with both because they're
the two interior gateway protocols that we
use for everything. But if you were going
to go tell me ask me in in enterprises, I
would tell you 90 plus percent of them are
all OSPF. And intermediate system to intermediate
systems is only with a very small number of
organizations. to kind of keep that in the
back of your mind. Not better they're just
different. Chris I think we have one or two
more Shawn Pollyannas, IGP is not BGP and
IGP is an Interior Gateway Protocol such as
AI GRP, OSPF or intermediate system to intermediate
system iBGP is interior BGP, and EBGP is external
BGP, so iBGP connects to the same autonomous
system Shawn EBGP would be connecting to an
external, an external autonomous system
those you can't do these things without BGP.
So if you don't know, BGP, pretty much you
can't connect to a cloud provider, you can
connect to multiple internet service providers
and load share. So the only time people would
not use BGP is if they didn't understand BGP.
And if they don't understand BGP, they basically
have to make some major trade offs. For example,
you can't use two internet service providers
at one time. If you don't know BGP. You can't
connect. You can't load share across direct
connections to the cloud provider. So pretty
much if you want to do anything real, you're
gonna have to use BGP. Let's get back to the
content. And we're going to start to have
some fun. So the first thing I want to do
before we get into traffic engineering or
the tuning is I want to answer Mandara question,
as well as Shawn's question. I EBGP versus
EBGP IGP is etc. So let's draw it out. We'll
do this all. I'll draw this out. We'll have
a little bit of whiteboarding fun, I always
like whiteboarding fun. Come over here. And
okay. So right now we've got a whiteboard
over here, my version of a whiteboard, it's
Microsoft PowerPoint. So let's, let's look
at what most organizations do. So let's create
an environment.
And in our ISP, we have a router here. Router
here, a router here. A router here. Let's
say this is our ISP, let's add some links
in between their devices. Let's create a real
Island bioburden for them, got some links
between our devices. Okay, we're over here.
We're over here. Add some legs, over here.
And over here. So now let's go to make this
a, make the B, make this see. Let's make this
day. Now we've got a basic internet service
provider. Now inside of this internet service
provider, these routers are communicating
with each other, do you think it would be
important tell me in the chatbox. If a link
between A and B were to fail, that we could
reroute around it quickly. Or you think we
can wait 10 minutes for this to happen inside
of our entity do we need it to be fast, fast
fast. So because we need a to be able to reach
D or B as fast as possible, we need a protocol
that's designed to give us speed. Which protocols
are designed to give us speed, interior gateway
protocols that are designed for speed or exterior
gateway protocols that are designed for scalability.
The rest of scalability, this link goes away,
I want to reroute around it this link goes
away. I want to know about it in seconds,
not minutes. So we run an IGP. Now let's build
a couple different internet service providers
over here. Build another internet service
provider. Now let's build another internet
service provider.
So now we've got three ISPs. They're all running
an Interior Gateway Protocol internally for
network layer reachability information. Now
what's going to happen? What we're going to
have is we're going to have EBGP peering between
these organizations. So this is going to be
EBGP the BGP now also guess what we're going
to in between this ISP and this ISP, what
else are we going to do? Again, we're going
to go back to EBGP. So we're going to go back
to here, we're going to go to the shapes.
We're going to go click this again, this is
going to be EBGP. Let's pop this over here.
This is going to be EBGP. Now I want you to
really think about this. We learn a route.
Let's call this route a let's Let's pop in
a subnet over here. We just learned about
this subnet 1.0 dot 0.0 slash eight. This
route comes from here. This route is then
sent to this BGP speaker here. This route
has to go through this organization to someone
else. And that's where iBGP comes in. So what's
going to happen is we're going to use iBGP.
Inside of this organization which is going
to ride on top of the IGP, the, but iBGP over
here. So now when we learn about this one
route, it gets carried across their network
via iBGP, and then sent to the next entity
V EBGP. And now, here's what it looks like.
Let's call this to, let's call it three. Now,
when we get this one dot 0.0 route, what's
it going to look like? It's going to have
this AAS path is going to be the prefix, it's
going to give us an AS path. And the AS path,
what's that going to be? It's going to be
three comma two. Now the Well, well, we'll
have a wait. It might say the 32768, it'll
have a local preference, which is going to
be 100 by default. Now, that's what we're
gonna see over here. That's the path. Likewise,
we have to run iBGP to carry it over. Because
if this guy speaks BGP over here, or girl,
whatever you want to call them, how is this
person going to reach this one, they can't,
because they have to cross this network. So
we're running EBGP to connect to externals,
and we're running iBGP to carry those external
routes across our network. That's the point
of EBGP. But we don't have the ability to
do a BGP peering session between A and B as
a general rule with iBGP. Unless we have a
have a loopback. So I want you to think about
this. If we just did BGP over the physical
interface, between B and A, and this link
goes down. We don't have a BGP peering session.
But if we have an Interior Gateway Protocol
running, and we connect the loopback, or logical
address to this router, and the loopback address
on this router, and this link goes away, it
doesn't matter because we can reach it this
way. And if this link goes away, it doesn't
matter. We can reach it this way. And if this
link goes away, well, we're in trouble. But
see, we've got three kinds, we've got triple
redundancy that's here. And we don't have
that without the Interior Gateway Protocol.
So the interior gateway protocols are designed
to kind of self heal your network. So hope
that makes sense why we're using an EBGP,
and iBGP, and all this other stuff. If we
don't have this, we're in trouble. IGP internally,
because it gives us robustness. As I showed
you here, if you wanted to hit a logical address
on this and a logical address on this, the
kind of address that doesn't go down, if you
lose a port, or a link or a cable when you
have that. Now you're in some really, really,
really good state, you know, exciting, exciting
stuff. So that's why we do it. We've got the
IGP to give us speed iBGP to carry the routes
off through our autonomous system, and EBGP
to connect to external entities. If that makes
sense. Everybody type hashtag BGP. I mean,
they know you're good. And then I'm going
to get involved in the fun stuff. While reading
it's type hashtag BGP. While we're at it,
so with So Amanda, yes, inside of an autonomous
system, we're gonna have an IGP and iBGP.
Yes, yes, you guys got it. I'm loving it.
So now, we've talked about this. We've talked
about EBGP. We've talked about iBGP woohoo,
Now's the fun time. Let's have some fun. I'm
going to walk you through some things that
I've pre made and done for you. And then after
this, this is when the party times, BGP party
time, so let's have some fun with it. So yeah,
this is exactly what happened to Facebook.
Somebody didn't know well enough in this configured
something. We don't want to miss configure
things. We want to be experts at what we do.
And that's why we're there. And you can see
without these fundamentals,
lots of things break. It's really funny, I'm
a martial artist. And then before we get back
to the content You know, when I practiced
martial arts, I studied the Israeli style,
mostly, everything was simple and basic, and
it was Master Master Master. And I remember
doing the same thing all day, every day again,
and again and again until I got it perfect.
And I remember training with somebody, and
this person just wanted to learn this, this,
this, this and this, but they didn't know
anything in depth. So get their deep, deep,
deep, and we're really good, we'll get you
nice and solid. So keep that in the back of
your mind. So let's walk through a couple
of traffic engineering experiences. And let
you let you guys walk through it. So let's,
let's go to an environment by let's do basic
routing for traffic engineering. So I want
you to think about this. Routers prefer the
most specific path. Routers prefer the most
specific path. That's not even BGP, that's
routers in general. So if I've got a route
to 192 168 dot 1.0, slash 24. And I have a
route to 192 168 dot 1.0, slash 30, I am going
to take the 192 168 dot 1.0 slash 30. Because
it's a lot more specific, it specifies a subnet
that's got four total addresses, versus the
slash 24, which is a subnet, it's got 254
Total addresses. So keep that in the back
of your mind. There's like that. So when we're
involved in these things, we take the most
specific route. So let's say you've got two
links, and you want to load share. Well, let's
look at the simple, elegant solution. In that
the cider range for the data center that we're
dealing with in this particular environment.
Whoops, that was not what I was trying to
do. The Cider range that we're talking about
is 172 16 dot 0.0, slash 15. That is our cider
range. So let's think about that inside of
that cider range. We might have a subnet 172
16 dot 0.0, slash 16. And we probably also
have a subnet 172 17 dot 0.0, slash 16. So
let's think about this. What up on the top
link? We advertised 172 16 slash 16. And on
the bottom link, we advertise 172 17. Well,
what's the most specific route? The most specific
route is as follows 172 16 on the top link,
so you know what data is going to be sent
on the top link? 172 16. Do you know what
data will be sent on the bottom link? The
most specific route? What is that? 172 dot
17 dot 0.0? Sec six. So that's it. Top link
specific link. Bottom link specifically, why
then did I put a 172 16 slash 15. Let's think
about this, right now, everybody, if I take
this beautiful, beautiful system that I have
right now, and I get rid of this tarp like
it's dead. And I don't have this summary address
172 16 dot 0.0 dot 15. All I have is the 172
17. So now, who reaches the cloud, we can
reach 172 dot 17 dot 0.0 dot 16 Because we
have it in a routing table. But if that's
the only route, can we reach 172 16? No, the
cat. Now if I put 172 16 dot 0.0 Slash 16
on the bottom link, I could, but if I did
that I wouldn't be load sharing. So what I
would do is I would take a summary route that's
good for both cider ranges, and stick it on
both the top link in the bottom link and leak
a more specific route on the top link in the
bottom link. And by doing that, the more specific
traffic is sent on one link, the bottom link,
the more specific traffic is sent on the top
link. And everything works perfectly. Now
if either one of those key two cables gets
cut or the router dies, guess what, because
we have that Summary link, we will reroute
the traffic to the next one. So one of the
easiest ways to do this without the simplest
form of traffic engineering specific route
or months of net specific route or another
some that poof Bob's your uncle and everything
works in your load sharing without award packets.
Keep that in the back of your mind. That's
why we do what we do in so many ways. Let's
walk through another situation over here.
Now when we're dealing with BGP, we've got
to do this in both directions. But if I pop
both directions, these charts are going to
get really ugly. So now let's say we want
to use the top link
two data center. We want to use the top link
for 172 16 and we want to use the bottom link
for 172 thing? Well, can we do anything about
it? Yeah, we can. What if we change the weight
for the top link for the 172 16? And we raise
the weight for the 172 17? Hmm. Prefer the
path with the largest weight? Okay, by using
a greater weight on the bottom one, for 172
17, that becomes the preferred path. Right?
Right. We love that, right? So kind of keep
that on the top. Link, we've raised the wait
for 172 16. Guess what? We've found more preferred
better paths. Do we like that? Everybody?
Do we like that? higher weight, prefer the
path with a higher weight with traffic engine
or traffic? local preference for further path
with the largest local preference. So we've
raised the local preference to 172 16 dot
0.0. Right? We've raised the local preference
to 172 17 dot 0.0. Which link is going to
be used for 172 16. The top one why it's got
the higher local preference. Which link is
going to be used for 172 17? The bottom link
because it's got the 200 local preference.
Okay. Now, if the bottom link goes away completely,
can we still reach the two subnets? Sure.
Can, we've got a route to both of them. So
as you can see here, what we're doing is we're
building a path and building a backup path.
And we're determining which path we want to
use. Last prepend, the AS path. Remember,
when I talked when I when I took it over here,
and I showed you the path of the route that
we learned has the AI autonomous systems that
have transpired? So let's go back to here.
Let's look at it this way. In this particular
situation, what we have over here is we have
the AAS path of 64523. That's the autonomous
system that we're learning our route from.
Oh, good, right. So the 172 16 has an AAS
path of 64523. What if I wanted to send the
172 17 on the bottom link? Well, what I could
do is I could make my 170 72 dot 16 on the
top link, and it says 176, but it should be
172 for this 172 16 link, or 17 link that
I have on the bottom on the over here was
to be 172 17. Notice what I did I added or
prepended an additional AAS path, I manually
put that there. As such, this is two ISP hops
away, versus the top link is only one ISP
hop away. So by doing it that way, did the
same thing on the bottom. I took the 172 17
made it as a primary. And I took the 172 16
and then made those backup, how do we make
it a backup? I made it look ugly? How did
I make it look ugly? I prepend it or add an
extra AAS path. And all these things should
be 172. I knew there was something wrong with
this slide was looking at what about modifying
the matter the multi exit discriminator the
cost to leave? Low lowest mad right. So I
wanted on the top link the 172 16 to be exciting.
So I reduced the met on that. I wanted the
172 17 to be less exciting. I raised the math
on that on the top link why? Now we're going
to take 172 on the top link. How about on
the bottom link? What are we going to take?
Come on, tell me which one are we going to
take? We're gonna take the 172 17 because
it has the lowest med so I walk you through
some examples. So let's play with it. Let's
tune it out. This is the time for all of you
guys. So every one of you type hashtag cloud
hired and now we're gonna get into the cool
nitty gritty of all this stuff. Unless Chris
before I do that, did I miss any questions
on the way to the whiteboard session
I'm gonna put some on the screen. I'm I'm
not sure if you discussed them all this goes
over my head. So
remember, you know it's interesting. years
ago, some people used IR GRP. But realistically
speaking eig RP would work intermediate system
to intermediate systems work OSPF work. Rip
is pretty dangerous as a routing protocol
used hop count that had nothing to do with
the cost of links. The way rip work it was
kind of like the best way I can describe it.
When we were younger and we all played the
game. Whisper down the lane. I tell you something,
you tell. So here's rep. Hey, Amanda, these
are the routes I know. And you tell Chris,
these are the routes you know, and Chris tells
Jean these are the routes he knows who tells
Saeed who tells Brian who tells her Robert,
who tells queen who tells Cafe memories who
tells Elvis? So rip is not real reliable eig
RP was a relatively good routing protocol
highly reliable, but internet service providers
didn't use it. And here's the reason. You
could only use it with Cisco routers, nobody
else's. And because of that you couldn't see
it with anybody else's routers other than
Cisco routers. We couldn't use it. So are
the IV through the IGP. Realistically speaking,
it's gonna be OSPF and 99% of the cases Mandor.
And unless you're working with a really big
internet service provider, they won't be using
intermediate systems to intermediate system
because they either won't know about it. In
most cases they will not. They've never touched
it majority network engineers have never even
heard of it. Unless they're working on big
Internet Service Provider environments in
which case they will be using it but OSPF
is typically what you could do, but any IGP
could work but the IGP that we use in today's
wherever intermediate system to intermediate
systems and OSPF. So pretty much they're all
we would use, but any of them could work.
Routers always pick the most specific paths.
Yes. TJ? Good question. I'm so happy mender
Perfect.
Alright, and that was all the way we hope.
So let's have some tuning time tuning tuning
tuning? We're gonna, Chris, did you ever get
us any Jeopardy music? Or do I have to be
Mr. Jeopardy?
You have to be my Mr. Jeopardy. I don't I
don't. I don't feel like having to deal with
CBS or whoever's in charge of that. Okay.
Something better,
but I'll be the Jeopardy music person. It's
all about having fun for me. I love tech.
So let's think about this. We talked about
an algorithm. Let's just play with it a little
bit. So you got over here, you got a router
could draw the router a little prettier? You
got a router and a router. Okay. Let's pop
them in a little box. Which of course will
make this whole thing invisible until I kill
the fill. Fill. See if I can stop my phone
from beeping. Phone. That was my
same message.
I know it was yours. I was just trying to
get
you had the two minute things just just like
I do. If you don't read it after two minutes,
it dings at you again. Oh, that's
why it does that.
Yeah, I'll show you how to take care of that.
That sounds great. After I get my coffee,
I'll be back.
Okay, so here we've got an ISP. Let's say
this is our data center. We'll do multicloud
stuff Suunto. All good. Right. So we've got
our data center. And now we've got a cloud
provider. And guess what that looks like the
same thing why the cloud is nothing more than
a network in a data center has been virtualized.
The cloud providers have just been really
good on Elastic Compute Cloud, virtual machine
DynamoDB, no SQL database. Seriously, who
would even think about the name of these things
Amazon Simple Storage Solution, object storage,
but you know, it's just it's just a network
in a data center. So let's say you've got
two WAN connections to a cloud, direct interconnection
on Google Express Route on Azure and direct
connection. me it's just a private line. But
let's say you've got two links over here,
private line here. Private line, it could
be a VPN tunnel doesn't really matter. You
can still use BGP and you should. Now you're
learning this route. Let's say our cider range
is
that's our range. Let's say the subnets that
we're actually using are as follows. And
one, dot 0.0 slash 16. And zero dot 0.0 slash
16. Okay, so let's say we have these two routes
let's say that I put ten.if I put this on
both links as it stands right now.
That's the 10.1 some Tell me, which is the
preferred path? You don't have enough information
to answer the question. So here's the thing.
The prefix is the same. You have no information
about the local preference, the AAS, path,
etc, or the weight. Now, because we haven't
done anything, the let's assume the AAS path.
Let's give this, this data's let's give this
data center on autonomous system number of
oops. 65535. So let's give you some more information.
The AS path on this one, is this. And guess
what the AAS path on the bottom one? Is this.
Which is picked? Anybody know? Well, we, we
don't know the the as paths are the same.
What about the weights if the weights are
the same, and the local preferences are the
same? Next, we get to the origin code. But
if the origin codes the same, if the origin
codes the same, then we start getting into
crazy things like IP address on the router.
So do we think we want to leave that to chance?
No, we want to tune it. So let's say we wanted
to take the 10 dot 0.0. On the top link, and
the 10 dot 1.0. And the bottom link? What
would be the easiest way to load? Sure over
here, too, if I just put a specific link around
on the top and a specific route on the bottom,
will we be load sharing? Comment in the section
below? And also in this environment? If I
have a cable cut? Will it work? Again, comment
that in the section in the in the chatbox
in this particular environment, which would
be the preferred path with the information
you have there? If you can tell me great if
not, say, tell me what anyway, which link
would be the preferred path for which subnet
and tell me what happens if either one of
those links falls? That's what I want to know.
Which path is preferred for which subnet?
And what happened? If either one of those
links goes down to the links that are advertised
on that subnet? Let me know in the chatbox
I'll do the Jeopardy music.
Doo doo doo doo doo doo doo doo do do do do
do tu tu tu tu tu tu tu tu tu tu tu tu tu
tu tu tu tu
tu whoever answers here. Okay. manner, this
specific group? Yes. So on the top link will
be pushing the 10 dot 0.0 slash 16. And then
the bottom link will be picking the 10.1 dot
0.0. Good job, man. Are you one of my students?
That's why you know, now also Manda. If the
cable cut, we get a cable cut, it won't work.
So Mandor what or everybody else out there?
What do we need to do to make it work? In
the event? We have a cable cut any ideas?
Any ideas? Anybody? Cable cuts happen. So
what are we going to do?
What are we going to do? Now we can work around
this? Well, Shawn, you said no load sharing.
So we could put a summary route Exactly. That
will be one of the things we can't do a default
route. Because we might have a default route
that goes to the internet. And we need a specific
route there to bias but we probably can do
is we can leak and more specific route or
a general route. So we could do option one
which Mandara told us this is good. We can
do a 10.0 dot 0.0 slash 15. On the top link,
which of course will have the same as path.
So work Mandara you are completely correct.
And on the bottom link, we can also do you
can also
fit in there and we've got a completely good
path. So manda you are correct, that will
completely work. What else could we do? What
else what could we do?
What if we did this?
10.0 dot 0.0 Slash 16 and 10.1 dot 0.0 slash
16. Well, could we change the way Okay everybody
in this particular environment, which path
is going to be chosen for which subnet? This
is completed in this particular environment,
we'll get the job we'll get the we'll get
the Jeopardy music. Which link is going to
be used for which subnet under normal circumstances
after I fixed my speller, my spelling your
toodaloo to route tu tu tu tu tu tu tu tu
tu tu tu tu? Pump, pump, pump pump pump up.
Okay, who
do we got? So which path is going to be preferred
for the 10 dot zero slash 16? And which path
will be used for the 10 dot 1.0 slash 16.
And if we've got a cable cut now, do we have
complete and total network layer? reachability?
Robert highest wait so which is the highest?
Wait there Robert? For 10.0 dot 0.0. And Ruth
Ruth which is the highest wait for 10.1 dot
0.0. Tell me the links like you got it and
I know you've got it. Okay, the higher weight
will take Yes, yes. Yes, exactly. So now let's
get a little. Let's let's think about this.
Let's play a little more. Because we get we
might have other attributes. So let's say
we've got this and let's say the local preference
it is is 200. And over here, we've got the
local preference of 200.
While we're at it, this default local preference
is 100 is 200 bigger than 100. So changing
the local preference to 200 could help right.
So everybody what is the decision algorithm
prefer the path with the highest weight prefer
the path with the highest local preference
weight comes first weight comes first. So
now in this particular environment, which
link is used for 10 dot 0.0 dot 16 And which
link is used for 10 dot 0.1? Did playing games
with the local preference make anything or
since weight is more important than local
preference? We're going to choose the path
with the highest weight anyway. Tell me in
the chatbox I'll get the Japanese ago.
Do tu tu tu tu tu tu tu tu tu tu tu tu tu
tu tu tu tu tu tu tu tu tu tu tu tu tu tu
tu tu
come on Ruth, or oh wait, you already answered
it. Ruth, you put 35,000 for the top. Yes,
that's the path that's going to be used, because
weight is more important than local preference.
And that's why 10 dot 0.0. Excellent. Siete
is used the top and 10.1 is used on the bottom
like excellent, excellent, excellent job.
Okay, this is the kind of thing that I like
to see, because this means you're getting
it exactly, the higher the weight. Now, let's
assume we wanted to do this this. We could
do it another way we could do a AAS path.
Now let's change this AAS path. So let's say
this is 65535. That's its autonomous system.
And now let's say we want to do it a little
different. We want to prepend the AS path
let's add a couple more 65535 Here, we can
do this called as path prepend. And it's an
attribute you can tune in BGP. So now let's
go over here let's make this this change this
path this Okay, guess what? We've modified
another parameter. You guys are doing great.
Do swirled Yes. Wait is greater than local
preference which is greater than as path.
Okay, so now, in this particular environment,
we've got one, that's one, one route, that's
one ASR away. We have another route that's
three as Hapa lays. So what are we going to
do which path are we going to choose?
Doo doo doo doo doo doo doo, doo doo doo doo
doo, doo doo doo people tu tu tu tu tu tu
tu para
Okay, everybody. So now, which link 10 dot
0.0 dot slash 16. Which link is 10.1? dot
0.0. And why somebody fill that into the chatbox?
The top has the path for the 10.0 dot 16.
Why? Because it's got a longer, it's got a
shorter AAS path. Exactly there, Ruth, you
think you're doing really great. Mark the
top link. So I absolutely love that. You guys
are getting it, you guys are doing fantastic.
So we're talking about AF path prepending.
We're talking about changing weights, we're
talking about changing the local preferences.
Like in this, you guys are doing great. So
now let's try to really think about what we
can do. So BGP has this concept of, so we
can influence our outbound traffic very easily.
How do we do it? Do the following. We can
change the weight, the local preference. Alright,
it's so easy for us to do that is outbound
traffic leaving our entity now inbound traffic?
Well, we could leak a more specific route
to our service provider. We can prepend the
routes that we send going out to influence
traffic coming in to us. But what else can
we do? BGP has this concept of a community.
So let's talk about BGP tuning and parameters.
So let's assume that we have this. And there's
lots of communities. And let's say that over
here, we've got our, our let's just say, our
data center. And let's say over here, we've
got a cloud, same thing data center called
that's what we're going to go over again.
I'm not sure Mike,
I thought I started to talk about something.
And then I lost my train of thought there
for a second.
Maybe they can help us on the chatbox.
Yeah, somebody helped me in the chat box when
I was thinking about that I was talking about
her over a minute ago, because there was something
I really, really, really wanted to be able
to help her.
We can't say anybody's wondering what it's
like to work with on with Mike on a daily
basis, Mike, and I do this quite often. Yeah,
good either. either. He has either he's got
an idea. I got an idea. or somebody's got
an idea. And we were just like, alright,
so thank you for paying attention. We're talking
about BGP communities. Okay, excellent. So
what we actually can do is, let's say we want
to send a routing information. I can, I can
actually tag the route, let's say tag the
route red. I can build a computer, I can name
it anything I want. I can call the tag route
read. What I can actually do on the far end,
is I can create a policy. And the policy might
say, match read. Ange, wait. Or it could say,
Don't send my route, don't export, which means
don't take in the routes that you learn and
give it to someone else. So we can do that
with the community. We can basically match
something, not just subnet, match a prefix,
match a community, and then take an action.
So that's what we do. And thank you so much
for what we're doing is we're taking something,
we're tagging it, and then we're matching
a tag. So that's just what we were talking
about on community. Now there's some well
known communities, one of them is called no
expert. And guess what the cloud providers
support it? What does the no export community
mean? What it means is this, you connect to
a cloud. And the cloud then connects to another
cloud, or the internet. But the no export
community means if you send your data to them,
if it's no expert, they won't send you routing
information. Anybody else will stop here,
as opposed to normally with EBGP, the routes
will be passed from you, to your cloud provider
to the next cloud provider, internet service
provider with the community, we can tag it
no expert. And that means that when the cloud
learns the cloud, it won't do it. So why might
we want to do that? So let's say this is us.
Let's say this is an ISP. This is us. And
this is ISP B. If we take in the routes from
ISP A and we pass ISP as routes to ISP B,
and then we take in the routes from ISP B
and then we take them and in then we send
them to ISP A. Now, what's gonna happen? Potentially,
if we're not careful. And we really don't
know, we can have the entire internet go through
our organization to reach certain subnets.
Now, I got to tell you, that is not what you
want to do. Because what might happen is you
might be pushing 100 terabytes of the internet
traffic through your network that only has
a gigabit connection, you've just taken down
half of the entire Internet. That's why we
talk about the community, no export. That's
why when you connect to AWS, they assume you
know nothing of networking, none. And that's
why they turned everything into non transitive
routing. So iBGP is transitive. And EB GP
is transitive. So what is that mean? If ISP
over here, tells me about the routes, and
I tell ISP, the PB, ISP A and B can talk to
each other through me. If I don't want ISP
B to talk to each other through me, I can't
take ISP B's routes and give it to ISDA and
ISP to give it the ISP B, for those same reasons.
Kind of keep that in the back of your mind.
So BGP community is specifically something
that you can add to it. So it's kind of like,
let's say, I had two sets of students and
I wanted them to meet, I could put red T shirts
on some of them and blue T shirts and say
reds competing with blue for the rest of the
day. Same kind of concept tag, something blue,
blue is allowed in blue has a higher weight,
Blue has a higher local preference, drop blue,
or whatever we want to do. That's what we're
dealing with the community. So the community
is just something that you can do to tag stuff.
And then you can match that tag to do things.
So that's some of what we do in the network
architecture sort of percentage of the world.
So let's talk about EBGP and iBGP. A little
bit. So EBGP is when we connect to external
entities, and iBGP is what we use in our own
networks. So this is kind of fun stuff. So
EBGP is transitive. iBGP is non transitive.
This means that if we've got the following
let's say we've got these three devices, and
an iBGP environment. I want you to understand
this. If let's say this is iBGP so let's say
this is our router one router to router B,
outer C so an EBGP here's what's going to
happen. This character forms a neighbor adjacency
with this one, this one forms a neighbor adjacency
list in this one router, a tell C router C
about its route who tells me router B about
its route, router B then reaches router A
through C everything works. And if this is
our goal, this is perfect. Perfect. This is
why he BGP works by default. Now iBGP is different.
In iBGP. If router a sends its routes to router
C, router C won't tell router B about it.
Hmm, that's ugly. Router a tells router C
but router C doesn't tell about P. Now router
B tells router C about its routes but router
C can't tell a this is iBGP. Now this router
B know about any of our router A's routes?
No, because router a tells C who does not
tell B routers B tells C who does not tell
a so they can't reach each other because they
can't reach each other. A can't reach C this
is called non transitive routing. Now how
do we get around this? Well, if we add an
iBGP connection between them even if it's
across the network, we're because we have
a routing protocol for the iBGP reachability.
From our IGP now router B can tell router
a of its routes. So what did we have to do?
We have to in an iBGP environment and an iBGP
environment. What do we have to do? See look
let's go through this again because I don't
think I was sharing my screen before. In this
environment. Router a tells us route to router
C but router C doesn't tell router B router
B has relative tells router C but router C
doesn't tell router a so router a can't reach
router B because they have no idea the routes.
That's not good, right? Well, maybe it is
maybe it isn't it depends on the situation.
So in iBGP we realistically need all our iBGP
speakers to speak to everybody else because
router a doesn't know how to reach router
B that's the problem. Now we have two workarounds,
workaround one, create an iBGP pairing session.
Now router B can tell router a about its routes
and everything works. So let's think about
this. We have to fully match our iBGP peers.
Because it's non transitive. If a would tell
C and C would tell B, everything would work
perfectly. So we now have two options. We
have the option to turn router C into something
called a route reflector. And what is a route
reflector? A route reflector is a rule that
says violate the non transitive routing in
BGP. What does that mean? It then means quite
frankly, a router B tells router C about the
routes once you told it, it's a route reflector
router C will then tell router a and now router
a can reach router B through router C. Pretty
nice. Right? Perfect. So why did we come up
with this crazy idea of a route reflector
to violate the iBGP rules to state that it's
non transitive, it must be fully meshed. So
I want you to think about this. When it comes
to fully mesh, you need a lot of legs. So
the formula is this and I'm not Mr. Math,
n times n minus one divided by two. So Mike's
not Mr. Math, my wife, Mrs. Math, but I am
not. So let's say 10. Let's say we've got
10 routers, 10 times 10 minus one, which is
nine equals 90 divided by two equals 45 connections.
So you've got two of these three of these
no big deal. Three routers, three connections,
n times n minus one divided by two n times.
So three times three minus two, which equals
one equals six divided by two equals three.
It's easy. Now 100 BGP speakers 100 times
99 divided by two. Now we're getting into
what 909,990 is in my head, divided by two,
it's large numbers. So the thought even got
there and maybe I shouldn't be doing math
in my head. My wife can do calculus in her
head, but on my wife, it's got 170 IQ. It's
kind of cool. But let's see there another
so we created a route reflector. Now where
does this come into play on the cloud? Well,
on the cloud, we do a lot of VPC peering,
right? Is VPC, peering, transitive? No. Why?
Because they don't want you to become transit.
So they assume you don't know BGP, and they
make it non transit. So what is the cloud
providers lecture do? They make up a route
reflector, this route reflector is 30 years
old. So they come up with the concept of a
cloud hub, or transit gateway, which basically
is the same BGP route reflector that says,
hey, router, a when you give routes to router
C, tell router B about it. And then you don't
have to fully measure iBGP peers. So kind
of cool, huh? You can see in the cloud, what
we're doing to get past this non transitive
routing is exactly what we network engineers
and architects did with Cisco 30 years ago.
Meet the new boss, same as the old boss. That's
what when I say when you learn your fundamentals,
you will always always always be good. I learned
this 30 years ago.
Whether it's AWS, Azure, Google, Dell, Cisco,
Palo Alto is cloud, it's all the same. That's
why we're working so much on the fundamentals.
So we've got this, we've played with it. So
let's think about it. So everybody told me
now what is the purpose of the Interior Gateway
Protocol? Why do we use an Interior Gateway
Protocol internally tell me in the chatbox
what's the point I know you know. Tell me
why are we using an Interior Gateway Protocol
internal organization? What to what things
we need pushing traffic through the internal
network? Exactly. What else margin do we need?
reachability for our iBGP peers loopback to
loopback Yeah. Do we need as Robert said speed
and recovering from cable cuts our routers?
Yes. We need to enable packets like Kenya
said to get from router to router. Good answers.
Good answers. Excellent answers. That's exactly
what we need. Get our packets our data from
point A to point B you guys are doing you
guys are like magic today. Reach ability Mark
Bourne. Perfect. So the interior gateway protocols,
speed, convergence, self healing Fast, fast
fast. Now we need iBGP to carry BGP routing
information across our organization. Why can't
we take the 8 million routes from BGP and
just dump them into OSPF or an IGP? Well,
the interior Gateway Protocol is not designed
to handle that many routes. So because that
Interior Gateway Protocol is not, if we take
the BGP information and dump it into our IGP,
we just break the IGP. But we need that IGP
to get the routers to talk to each other good
stuff. And why are we using BGP right now?
Why are we using BGP? Well, we're using BGP
for the following reason. It gives us scale
and tune ability. It ties that. So BGP is
different than other questions. Most other
routing protocols do a multicast too low to
find each other. Does BGP find each other?
Or do we have to tell it to the manual neighbors?
Do we manually specify the neighbor? Do we
manually connect to it over any port? What
is the protocol that's used for the BGP peering
session? And what is the port? It's a test
question. And if you ever need to work with
BGP, you're gonna have to open this port on
the firewall. Is it TCP or UDP? And what is
the port number everybody let me know in the
chatbox.
Margin and is TCP what port and port 179 Robert
Good job TCP port one seven out and juice
world TCP worlds have a nun, Queen Yes. TCP
port 179. And Ruth Lyon Lord That's a cool
name. I always love lions, Elvis 179. But
you get the next one. Say TCP port 179 and
shell over there back with a blue wrench.
Thank you for everything Joe. Mark born TCP
port 179. Excellent, excellent. So two routes
same prefix. One has a local preference of
1001 has a local preference of 50 Do we take
the local preference of 1000 Or do I take
the local preference of 50?
See you again sorry, Subarus Boomer would
fly take the 1000 or the 50? Which one which
local preference do I take
prefer the path with a higher local preference
so margin 1000 psi aid 1000 Kenya CARL Yes
1000 Exactly. Now I've got two routes one
has a weight of 32768 and one has a route
a 32769 Which one do I take good job Brian
Ruth you've been doing so good. It's pretty
fantastic. Robert exactly root 32769 Because
it's higher. Now I've got two routes in my
BGP table one has an origin code of IGP one
has one of incomplete which one which one
do I take the origin code of the IGP or the
origin code of incomplete?
IGP is greater than incomplete exactly IGP
is greater than EGP which is better than incomplete
x so excellent. So good. I have a path that
has an AAS path of 12345 and I have another
AAS path for the same realm. That is 123456789
which delay take the one that's 12345 or the
one that's 123456789 Which one tell me tell
me tell me margin good the 12345 the shorter
path Excellent. Excellent. So are you guys
curious how we connect to multiple internet
service providers? Is that something you want
to know?
Let me know like before we move on to the
next thing. Let's Let's allow some time for
these to clear out just because we asked them
pretty quickly back to back. Good. So, so
answers from, like, three questions ago are
still coming down on some of them, sir. Okay.
So you can talk about the webinar tomorrow,
the coaching session on Friday. The sunny
skies outside here in Florida, you know, are
actually, am I part of Florida?
Actually Chris is right. So we had a couple
of weeks where it was like 60 degrees outside.
And we Florida people were not happy, my cat
would walk outside in the morning, she take
three steps, she looked at me and she'd run
right back and jump up in my lap. She was
not happy. Because it was like 60 degrees.
And quite frankly, my body because of the
injuries I've had in martial arts is not too
good. I've been spending hours per day on
my 132 room just trying to hide out in there
and just bright and sunny right now, which
makes me really, really happy and excited.
But the couple of things to talk about as
I do want to know that you come join us on
our How To Get Your Free Clinic talk job tomorrow,
it's Realistically speaking, I want to help
you and I want you all getting cloud hired.
So let's talk about we'll come we'll talk
about what hiring managers desire, what a
real Cloud Architect is what we really do,
how to become highly technically competent,
and capable. How to get past the hiring, not
how to get to the hiring manager, not get
blocked by HR, those kind of things. So, you
know, kind of keep that in the back of your
mind. You know, there's something like that.
Also, I want you to join that. Also, on Friday,
we're going to have a free interview session.
I've been coaching interviews now for 20 years,
I've never had an interview for which I didn't
get hired because I studied interviews for
so long. My students get hired every single
day. And a lot of that has to do with our
special interview techniques, our interview
tactics, our knowledge and research of hiring
managers, our knowledge and recruiting research
of CIOs, we've asked 1000s and 1000s and 1000s
of hiring managers. So we are real experts
in internet getting people to pass interviews.
And we'd love to see you join us and it's
completely free. So join us. Definitely join
us. So before we go into anything else, does
anybody have any questions with me? Any questions
on anything we've covered so far? And I'll
probably walk you through some ISP design
and multihomed me to give you a feel for it.
Maybe what we'll do is we'll create a high
availability, high reliability multi cloud
architecture, using BGP, does that sound fun?
Everybody? Let me know chatbox. Or if you
guys are all tired, and you just want to take
a nap. Let me know that in the chatbox. And
I'm okay too. Otherwise, I will go if you
want more. We can call it a day we covered
a lot of BGP, but you guys are in charge let
me know in the chatbox multicloud type any
other multicloud with ISP or nappy time?
Keep going we can keep doing that. So why
did these protocols called the stack? I don't
really know, another programmer, but sometimes
they call it the TCP IP protocol stack just
because of what's going on as we've gotten
multiple protocols they're saying in here
Yes, route reflectors is designed to reduce
the number of iBGP connectors. Exactly. multi
cloud multi cloud high availability multi
cloud with ISP. Yep, sure, we can do it. 17
years. beamer sounds great margin. Sounds
great. Let's have some fun with it. But yes,
I that's exactly the reason why we do that.
To reduce the number of BGP connections are
the girl says keep blazing through the girls
a veteran, and she's definitely got the inner
fighter to keep going. So let's do it. Let's
keep going. Let's start thinking about our
multi cloud environment. And how do we make
these multi cloud environments really, really,
really high availability? So before we do
this, let's talk about why we would go multi
cloud and why you'd be insane not to. So when
it comes to networking, there's a lot of principles.
First principle is this. No single points
of failure. Hi, I'm so happy to see you there.
IO. So happy to see you back, Brandon. No
single points of failure. What is the single
cloud single point of failure? You know, in
AWS, they like to tell you you can stick all
your eggs in our basket and you're safe. Azure
tells people to do multi cloud. Google tells
people to be do multi cloud Nutanix tells
people to do multi cloud, but our AWS seems
to tell people they can do it on their cloud.
No, that's their perspective. I come up with
classical networking background, I've been
hired by the world's biggest banks, the world's
internet service provider, the biggest and
best in the world to say, Mike, we can't tolerate
downtime. And if I told any of them single
cloud, on not only what I get laughed out
of a job, my name would be destroyed, and
my replacements would take my job and thank
me for it. Because the customers that I deal
with no high availability, no, no single points
of failure. So how do we make this work? Well,
we make no single points of failure. So right
now we're going to teach you how to do is
we're going to teach you how to design the
kind of high availability multi cloud networks,
that only maybe 1% of the most elite architects
in the world when no one else will notice,
we're going to get in to some deep, deep,
deep, high availability, high performance.
And we'll just pop it into our BGP training,
because why not. And what we're going to do
is we're going to go through these high development
principles there include no single points
of failure. One is none, two is one and three
is greater than two. If something can happen,
it will happen. The reason a single cloud
is a single point of failure is as follows.
The clouds all have a control plane or orchestration
plane, that determines where your VMs are,
or your storage. If that gets hacked or goes
down. The entire cloud is dead. The cloud
rides on a single network, do you know what
happens is that goes down, the cloud is dead.
The call gets hacked. You know what happens?
The cloud can be dead. So that's what matters.
So Robert, you need to learn that cloud, not
a cloud. Robert, a virtual machine is the
same virtual machine, whether you call it
and virtual machine on VMware ESXi, or virtual
machine on KVM, or QE am you an Azure virtual
machine and Oracle Virtual Machine on Google
Compute Engine instance and an AWS easy to
instance, it's identical. Guess what? Block
Storage will always really say object storage,
if you call it Amazon, simple storage solution,
object storage with Dell, EMC, or Microsoft
blob, or Google Cloud Storage, it's the same
thing. So Robert, don't waste your time learning
any of these things from any vendor, learn
that tech, and then you know all the clouds.
That's what you need to do. So remember why
we're doing these things? High availability,
no single points of failure? So if we have
a single router connecting to the cloud, is
that a single point of failure? Yes. If the
router is the connects to the cloud is plugged
into a single outlet, is that a single point
of failure? Yes. If we only have one link,
is that a single point of failure? Yes. If
the cloud gets hacked, do we have an another
cloud anymore? No, we're dead. Cloud is a
control plane failure. We're dead. If the
cloud has a networking failure, like AWS is
eight, our networking thing because they somehow
built a data center that didn't have redundant
power, redundant generators have redundant
power companies. And they had a power outage
that took down half of the global world.
So not availability, not redundant. So how
do we do it? What do we need to do? Let's
talk about how we do this. So let's first
talk about high availability ISP design. Well,
what is high availability ISP design? Well,
the internet has always been considered a
cloud. So here's our internet, internet. Now,
now for internet. Let's say we want to connect
to the Internet, what do we need to connect
to the internet? We need a router. We got
a router to connect to the internet. And we've
got a second router that connects to the internet.
Now, let's say our business is dependent upon
Quality internet access, high performance
internet access. Could we use a single internet
service provider? No, our business is dependent
upon the internet. So that means one is none.
Two is one and three is greater than two.
And if we want optimal internet performance,
we might use four or five or six internet
service providers, because each one's going
to be closer. So let's do this. Let's take
our router one, router one, and router two.
Now, we would be insane. To connect router
one on 18 T and router two and at&t, that
would be about as bad of an idea as sticking
all your eggs in a single cloud provider.
So when people actually connected the internet,
they always have been taught for 30 years,
always to use two different internet service
providers. So we're going to do the same thing.
So let's say we've got 210 Gig links to one
ask pay two to 10 Gig links to two different
internet service providers on one router,
and two different internet service providers
on another router. Now we've got four links
to the internet. Let's say this one's at&t,
this is Verizon. This is NTT and CenturyLink.
Why do we have two routers? Not one, because
if the router dies, guess what? We're dead.
So we're gonna put a link between them. Now
on these routers, we saw that AWS had a power
failure and it took down their network, do
we want power failures. So what's going to
happen with these routers, each router to
put into context is going to have two power
supplies. Power supply is going to be plugged
into outlet one, power supply is going to
be plugged in the outlet to so we will always
have redundant power. Now, but the brain these
devices, well, if the brain has a problem,
the router goes down. So we'll put multiple
brains or control modules. So each router
that's going to connect to the internet should
be a big router, have multiple power supplies,
multiple brain, because one is none, two is
one and three is greater than two. Now guess
what? We've got two internet connections on
that router, should they be on the same line
card or a different card? Two cards, because
the routers have cards and if one of the cartels,
you still want the router to work. So we're
going to do this two routers, for connections
for different internet service providers,
different sets of power that plug into different
power outlets. Now in our data center, we're
not AWS, we actually know how to build a data
center, we are going to bring in our power
from poor power companies, separate companies,
then we're going to have generators, guess
what, we're going to have backup generators
and backup to our generators, we're going
to have batteries to back it up. Data centers
other than AWS do not go down from power failures.
Because organizations use multiple discrete
power, that's the way they'll do it. How did
AWS have a power failure? I don't know. Did
they have a power fire? I don't know. But
whatever the case is, we build our data centers
around this. So that's what you're going to
see in a real data center, redundant power,
redundant cooling everywhere. Now, what you
find is, these are our I, these are our routers,
and then we're going to have our data center.
And here's going to be our data center. Now
what should we do in our data center for really
good? Well, what I would do, I would probably
install an OpenStack cloud or an atomic code
like I have in my house. And that gives me
auto scaling agility, the ability to create
what I need and load balance what I need instantly,
that's what I would be doing. And that's what
I do personally. But let's just say it's a
data center. Now, we're never going to be
crazy enough to put all our eggs in one basket
like a single cloud provider, because we know
that's just sheer insanity. So now what we're
going to do is we want to have in our data
center, we want to have multiple routers.
So we're going to have a router connecting
to the cloud. Let's say this is router one,
and what they would get to to connecting to
the cloud provider, or to let's, let's drag
this stuff up a little bit more, I want to
really give you the space to say it.
Now we're also while we're at it, in our data
center, we're going to pop to more routers.
So let's just, it's not going to be the prettiest
thing. So now let's say we've got AWS over
here. Always pick a second cloud. I happen
to love working with Azure. They're very friendly
to work with, but they're all good. They're
all great clouds. I mean, I may make a joke
about AWS explanations, but it's a good cloud.
I just like to be honest with my people and
say, if this happened, here's the problem.
If this happened, here's that as opposed to
just not knowing because some of these answers.
So this router connecting to AWS or both of
them. You think we're going to we're going
to put two power supplies on these routers,
yeah, power goes down, we lose our connection
to the cloud. How about control modules? Do
you know one? Yeah. How about if we have four
fiber optic links and a link aggregation group
will be spread across line cards? Yes. So
this is what we're going to be doing. Now
how about Azure? Same thing, two different
direct connections or private lines Express
Route are going to on two different environments.
So this is how we do it. We we take this.
Now let's think about the security and the
integrity in this environment. Between this
Internet in these routers in our data center,
what devices? Do we have to keep our systems
locked down? Do we have firewalls, their
IDS, IPS systems?
Access Control Lists, etc? Yeah, we do know.
Over here, let's say this is the site arrange
for this hand view, dot 0.0, slash 16.
Let's say the site arranged for Azure is 10.1
dot 0.0 dot 16. Do I need this Azure, if Azure
doesn't need to talk to AWS? Can I put can
I do I, I only need to take in the route the
10 slash zero to zero from AWS. And if I only
learned this one route
I learned this from my AWS links. Brandon,
we might want to load jam which case we tune
them. But for just argument's sake, I just
want to make life simple for you guys. In
this particular environment. If AWS doesn't
need to talk to Azure, I won't take AWS routes
in and give them to Azure. And I won't take
Azure as routes and give them to AWS, does
that give me any security? If I don't pass
AWS information to Azure, and Azure is information
doesn't go to AWS? Can anybody think of how
we've impacted security? Tell me about the
security. Can if AWS get hacked gets hacked
in this environment? If AWS is hacked, now
let's think about it. Let's think about it.
Let's think about it. If AWS is hacking that
your VPC, you need to boost this hack, can
it can it affect Azure? No, you didn't give
them URL. It's Azure is hacked. And you don't
pass Azure as routing information to AWS.
In AWS get hacked from Azure. No. Now we want
to make this better. What else are we going
to use? We're gonna use access control lists
on these wavelengths, we might use firewalls,
we might even use IDS, IPS systems. The point
is, is we can lock our stuff down in between
entities. And that's why we're using BGP for
this. Because it gives us the absolute ability
to control who gets access to what, where,
how, and why. If we don't share the route,
we can't do it. And that's why we like this
environment. So when you're dealing with this
particular kind of environment, you're going
to be running BGP to your internet service
providers, you're going to be running BGP
to your cloud providers. And that way, you
can run your IGP in your entity that's good,
strong and performs well. From there, you
can connect those two entities to external
organizations, and poof, we've got high availability
and high security. Now, does anybody is anybody
curious about how we do the security in an
environment like this if you are top security?
Otherwise, you know, don't tell us say, BGP
is enough for the day I got a headache, let
me know in the chatbox either just like BGP,
meaning we're good with BGP. Or if you want
to know how to do multi cloud security, we
can talk about that too. Let me know with
multi cloud security there BGP or multi cloud
security.
Motivated Buncher. Love this okay, I'm liking
this. I'm seeing Security Security Security,
or Eugene's has done more BGP. Alright, Jay,
no more BGP. But a lot of people are looking
at security. I was looking at security I on
my super security guy. Are you also here looking
for security? Because there's a there's an
IO that's a there's an IO floater. That's
a really good security gun that I saw was
here earlier. Okay. So, all right, there you
go. I want to do security. Well, let's do
some security. So fantastic. Let's get involved
in some multicloud security, fun, fun stuff.
So we came prepared. You guys are motivated.
I just keep going. Like Chris says he knows
me. I just do stuff on the fly. It's fun.
So let's thank Chris for being pretty tolerant
of this. So let's talk about security when
we go multi cloud. So each of the cloud providers
have their own little security services, their
own WAF, etc, their web application firewalls.
Now, I really want you to think about this
logically. Who do you think focuses more on
security? A company like Cisco that's had
30 years of security making a company like
Palo Alto that only does security. A company
like Fortinet that only does security, or
Amazon, that's the world's largest retailer
that does your virtual machines or containers,
your storage, custom databases, custom, this,
this, this this, who do you think has a better
security product? Well, I got to tell you
this. If you go to a big bank, and you ask
them what kind of security they're not looking
for hobbyist grade, typical proprietary vendor
services, they're looking for something rock
solid, something really robust. Made by the
world's best security companies, who are they
their checkpoint in Israel, their Palo Alto
Networks, their Cisco, their fourth net, and
they're Juniper, these companies make the
world's best firewalls, and they are rock
solid, incredible IDS, IPS systems, and if
you care about your network, you're using
one of them. So what do we use on the cloud?
Vendor proprietary, something that only works
on a single cloud provider, or something like
from Cisco, or Palo Alto that works on all
the cloud providers gives us more features,
more functionality and better security? Well,
that's what we always use. So when we go multi
cloud, we got to toss out nons. Most of the
nonsense, they teach us in certification,
the proprietary services with the fancy names,
and we swap them out with things that work
everywhere. So let's start talking about how
do we do it, let's build ourselves a very
high security cloud environment. So each cloud,
every club we deal with is going to look this
way. Because remember, imagine using Cloud
armor on Google, AWS, WAF, and shield on AWS,
do you think you have the same firewall security,
of course you don't. You only you get little
bits and pieces of each thing. And they're
all going to be similar but different. And
we don't want that. We want identical security
policies. So let's begin with a web application,
you really want to block bad web requests
before they reach your system. Because if
they can't reach you, they can't hack you.
So we typically use a content delivery network.
I'll add flair, Akamai cloud front, Azure
content delivery, whatever content delivery
network why? Well, the content delivery network
caches things. So if 1000 of you go to the
web page www.co kg careers.com. The first
person that typically hits the cache, and
a geography has to go to the server. If 999
Other people hit the same cache, the web server
only gets used one. So it can greatly increase
the scalability of our systems and reduce
the impact of a DDoS attack. Now, additionally,
content delivery networks won't forward good
request to the server. So here we got an evil
hacker or you're trying to sense a bad request
or servers, the content delivery networks
just traveled. That pretty cool. So content
delivery network, generally speaking, our
first line of defense in web applications.
Now behind that, we need a firewall. But we
need a good firewall, a robust firewall, we're
not looking for hobbyist grade firewalls.
We're looking for high security things. So
that means Cisco Palo Alto Juniper, we got
to go to a security company.
Now Has anybody gone to the cloud provider
recently opened up the door to the cloud provider,
brought in some racks in a drill, screw them
in zip cabled it up in there, plug them into
the racks and the cloud providers plugged
in your ethernet cables? And you were up?
Has anybody ever done that? And here's why
the cloud providers won't let you in their
buildings. They're physically secured, so
you can't get there. So now how do you deal
with a firewall? Well, in all the cloud providers
that when you need high security, you go to
the marketplace. And that's where you buy
your Palo Alto or your Cisco devices. These
are good strong devices. So we go there. Now
where do these devices reside? On virtual
machines or virtual machines, high availability
devices? Of course they're not. They just
go down in the crash. We got nothing. So what
do we need? What do we need we need? One is
none. Two is one and three is greater than
two. Three is is greater than two. So what
we're going to do on three cloud providers
is use the same single vendors firewall on
all of our cloud providers, the same Palo
Alto, this is going to be identical in everyone.
So how do we is there any special device that
enables us to improve performance and remove
single points of failure in virtual machine
world? What is that device that enables you
to load share across virtual machines, and
remove virtual machines if they fail via HealthTech.
It's a load balancer load balancers improve
performance and availability. So the first
thing we're going to need now is the network
load balancer. Because we're going to need
the network load balancer to load balance
or virtual firewalls. And then of course,
we're going to need virtual firewalls. So
this will be firewall one, and we'll have
another firewall and the load balancer will
load balance our firewalls. Pretty cool stuff,
right? Okay, so now, we've got our firewalls
there. Now, let's assume for right now, we're
not using a next generation firewall, or we
are but we want secondary intrusion detection,
intrusion prevention devices. So how do we
make that work? Well, we need another network
load balancer. And then after that, what are
we going to do, we're going to have our IDS,
IPS systems.
And of course, we're going to have these sitting
on both clouds or three colors, many causes
we use, where do these IPs IPS systems reside?
Where do these virtual firewalls sit, they
sit on virtual machines. So on every cloud
provider, we're going to do this, we're going
to keep the bad requests from hitting us on
the content delivery network, then we're going
to build this firewall, the firewall is like
a giant wall around a castle, picture wall
that's 3000 feet high. And there's no ladder,
you can't climb it. That's the firewall. Now
behind the firewall, we have an intrusion
detection prevention system. So let's say
we're going to build a firewall. And let's
say I was building the castle. Here's what
I would do, I would have this 3000 football,
you're not climbing over. And in the event,
somebody managed to climb over the wall, I
would have this big giant moat. And I would
fill it with sharks and alligators and crocodiles.
And on the edge of the moat, I would have
lions and tigers and bears, I guess I should
say, Oh, my, but I would have lions and tigers
and bears and they barrelling. So why, if
you managed to get past my firewall, which
you won't, and you happen to get there, I've
got this intrusion detection, intrusion prevention
there. My sharks and lions and bears, they
eat you. They eat you get through. So stop
it at the content delivery network blocked
at the firewall. And if you get past the firewall,
you get eaten by lions. That's the intrusion
detection, intrusion prevention, sharks, lions,
etc, etc, etc. Absolutely. So now how do we
protect our subnets in a call or or a data
center? We put an access control list on a
router? Is there anything we can do on our
servers and cloud providers to keep chopper
from getting into a server? Yeah, they also
have security groups, network security groups,
security groups is kind of like a host based
firewall, that we think we're good. This isn't
enough. Now about what about members? And
it's just like peeling an onion cow. How about
our servers, the servers themselves? Are they
locked down? Of course they're not. They're
not locked down. What do you want to do on
the servers? Well, maybe when we want to put
a host based firewall? Maybe we should put
some endpoint protection for example, anti
malware but about disabling unnecessary services,
we want to leave every every service open.
What about vulnerabilities? We closed them
down? Of course we do. So we're gonna patch
it. We're gonna disable unnecessary services.
Now, do we think this is enough? So let's
say Chele. Once the knock on my door, what's
the first thing I'm going to do? I'm going
to look through the peeping window and I'm
gonna say oh, that's Ciao. And I'm going to
say ciao made it to my house in Florida. Ciao.
Welcome. Welcome. I'm gonna be real excited
that she's there. And I'm going to say ciao,
you visited me in Florida. Here's the keys
to the house. Here's the key to the car. You
go out there you stay with me you visit you
have a good time. That's what I'm going to
do for Ciao. Now, next, somebody knocks on
the door. And I don't know who they are. So
I don't let him in with that code, authentication,
authorization and accounting, otherwise known
as identity and access management, what most
enterprises use for identity and access management.
They use Microsoft Active Directory. Oh, so
whether you use an ad connector or Azure AD,
you're probably going to use that everywhere.
Should we be encrypting our data that we store?
Yeah. So if we're with Azure, it's automatically
encrypted. with AWS, we have to enable the
key management system. But in either case,
we're getting a aes 256 bit encryption.
We're starting to sense a trend here. What
about look at analyzing our software flows
to see what's going on? Cisco, we have net
NetFlow. It ws gives us something called VPC
flow logs? Would it be good to make sure that
we know what's going on with their traffic?
Sure. We need to know this. Absolutely. So
everybody, here's thinking about it. Now we
get logs coming in log log log log log, we
get logs from the firewalls, logs from the
IDS is logged from the ACLS logs from the
security groups, logs from a host based firewall
stuff logs from content delivery network,
Microsoft ad stuff, all this cool stuff. All
you think we've got a lot of information coming
in everybody. There we do all kinds of crazy
amounts of information. If we really want
to be high end security and adaptable now
we're talking way above military grade security,
what we're talking about now, this is really
elite security. Might it make sense to take,
say, the logs and the flow logs and all this
other data? Could we take this data? Might
it make sense that take this data and send
it to something like Kafka for the streaming
data? Might it then make sense to take this
data and put it into a visualization engine?
By doing this, we can actually see what's
going on with our systems. And heck, if we
really wanted to, before we even got to the
visualization tool, we could easily run some
machine learning. So we can kind of get even
more, even more kind of stuff going on. And
then we could evaluate the results. So you
know, when we're dealing with enterprise security,
and we're really trying to be robust, what
we're dealing with is layers, layers, layers,
layers, layers, layers, you got to know what's
going on, you got to be able to adapt to a
compromise. And if we start using Cloud proprietary
services, we can't do this, because look at
it this way. AWS and Azure have a content
delivery network. They both have network load
balancers, they both have marketplace firewalls.
They both have marketplace IDs solutions.
They both have access control and security
groups. On your virtual machines. You can
do all of this, you can use Microsoft add
on both 256 bit encryption on both traffic
flow logs get on both all of this works on
everyone. Why? Because we haven't used a single
proprietary service now. Use an AWS proprietary
anything and this changes. What's why we're
using Kafka versus Kinesis for that reason.
So we wouldn't use QuickSight, we use Power
BI or Tableau or something as a visualization
tool. The point is, there's so many wonderful
things for us to use. And we go vendor neutral,
I can do this in my data center, in the data
center. This is a physical f5 Load Balancer.
This is physical firewalls from Cisco and
fiscal, maybe from CrowdStrike, for example.
Now in a data center, it's just virtual, it's
the same. So now, I've got an OpenStack. Cloud
doing this, or Nutanix, called local data
center, connected to the Azure Cloud doing
this and the Google called doing this and
the AWS code. Now, you tell me, you've got
a hybrid cloud, multi cloud environment. In
the most secure environment, there is nothing
you can do. AWS has an outage, who cares as
your housing on it, who cares? You have an
outage, who cares? You're up and you're running.
And that's what businesses need to do. Business
cannot survive downtime. You know, Slack was
down half of the US could barely work for
a day yesterday, how that happened? Well,
we'll, we're not exactly going to know. But
how Slack and how all these big AWS customers
were down yesterday. And AWS service dashboard
was perfect. Not sure. You know, we never
know where it is. It could be on the customer
side or the AWS side, it's kind of hard to
find these things. But the point is, that's
what we're doing. That's the way these things
are designed. Now for the students in my cloud
architect career development program, we talked
about DMZ design and where the web servers
need to be in the VPN concentrators. But I
just wanted you guys to get a feel for how
you would use BGP. In a multi cloud environment.
Meaning all the WAN connections, you get all
the land connections that you get, who needs
to talk to whom. And that's realistically
what we're talking about. So I'd like to open
it up. Are there any questions for me? And
actually, before you guys ask questions, if
you can type hashtag cloud hired, makes me
happy. Like to see it. I know that you guys
are awake, alert and oriented. Plus, you know,
my favorite thing. I mean, honestly, and Chris
knows this. And Leo knows this is when somebody
calls me at night and says, Hey, Mike, I just
got hired. I'm like, it's the best thing news
for me. So everybody type hashtag cloud hired.
And then after that, any questions that you
desire? I'll happily answer.
Did you answer the question about the DMC?
Yes. Okay, I thought I thought so I just want
to make sure
for that one that sounds like Thursday's class,
we'll do a nice class on DMZ design.
Douglas G, you want to read about BGP, I recommend
the book Internet routing architectures, from
the psalm Halabi. It's an old book, I read
it at least 100 times. Each time I read it,
I picked out something good. It's my absolute
favorite book. Otherwise, I always go to the
Internet Engineering Task Force page, type
in all the BGP RFCs and read the actual specifications.
That is the most best source and I read all
of them too. Because I also read the Cisco
documentation, the Juniper, our documentation,
and everywhere in between. Architects will
definitely need to know the tools for interconnection.
But realistically speaking Danika you could
do all of this on BGP and not use any of that
Aviatrix or Nutanix. Anything, it is not necessary.
You can use every that all this can be done
via BGP, there are other they are using other
additional ways to do it to create cloud interconnection.
In this case, I wouldn't connect my clouds
at all, I would connect my data center with
the cloud and in most cases, leave my data
in the data center, because it's cheaper that
way. And it's more secure that way my data
is in my data center, like clouds can access
it. And guess what the data's in the data
center, you don't even have to pay to get
your data to the cloud, because data to the
cloud is free. Whereas data is not the cloud.
So architects do need to understand how to
design this. But we don't configure, we don't
use the tools. We don't use a bariatric. We
are not engineers, we are architects. So it's
all about design. So we do need to know how
to design it. But in general, these other
tools are more cloud to cloud. In many cases,
we're going to go data center to multiple
clouds by doing Danika what we showed you
without using any of the Aviatrix type things.
We have much more security and firewall, Enos
and robustness, the evatik tools on their
beautiful multi cloud multi cloud networking
tools. They make life a little easier. I'm
teaching you the hard way to do it versus
the tools that make life easier. But as a
rule, manual design. And optimization is always
better than things that are more automatic.
But love Aviatrix, a lot of the Cisco people
I know are working there, and they're all
smart. So it is fantastic. I almost took a
director position at Nutanix couple years
ago, because I loved it. I think they're a
great company. One of the best cars I know
mender. How does BGP work with a link aggregation
group? Well, interesting. And good question.
manner. The reason people use Link Aggregation
groups is this follow. They don't have to
get involved in complicated routing. So here's
what a link aggregation group is for people
that don't know here's one wire. Now we've
got two wires. Now we've got three wires.
So what a link aggregation group is port channel,
ether channel, whatever you want to call it,
is when you take these separate wires and
instead of looking like separate cables, you
make them logically look to the router like
one because we're Mandara and this is a great
question we're making the four cables look
like one it's a single cable, which means
if we have layer two things, we have no spanning
tree problems. We're not blocking on these
links on layer three links. It does not look
Like three or four equal cost links, it looks
like one link. So when you're using BGP with
a link aggregation group, it makes all those
links look like one. So that means you would
naturally be load sharing like all four links,
without prepending, a ss and changing anything.
So what is the simplest and most elegant way?
And manner, if you've got 410 Gig links, for
example, and a link aggregation group, and
one of the links goes away, you still have
three more. So it's high availability, high
performance, and elegant and super easy routing.
Best thing ever invented is link aggregation.
What would I use as a machine learning tool?
Well, here's the thing, Robert. I am not a
machine learning engineer, a customer, an
architect. But there's all these good libraries,
pytorch, TensorFlow, etc, etc. And you know,
where they work on every cloud and the data
centers, you know, what kind of tools I probably
be using the interoperable tools that will
work anywhere. But, Robert, if in all seriousness,
if I was not, if I didn't have big data scientists
working for my company, and I had a lot of
machine learning, and I was looking for something
quick, and I had a small team. Google has
some extremely good premade, artificial intelligence
machine learning libraries. Amazon hasn't
hit as does Microsoft, but look at it this
way. When I go to somebody, I like to go to
the people that have the most experience.
I go to Cisco checkpoint Palo Alto, unfortunate
for security, because they have the most experience.
Who was the number one algorithm creator in
the world? Who was the number one search engine
in the world, Google? Who is the number two
search engine YouTube? Who would I go to for
machine learning capabilities? If I didn't
want to have my team naked myself, I would
go to them. That's their world. They are the
algorithm makers. I'd be going to Google.
But I'd prefer to hire people that can just
build it from scratch. How does one determine
the number of firewalls to use, for example,
why two firewalls? Well, you can never use
less than two firewalls. Because if one firewall
fails, your whole network fails. So that's
why we use two firewalls, I will never use
less than two. Because the firewall is your
connection, there's a firewall dies, everything
goes all your web apps, everything's done.
So you can have your firewall fail. And when
the two methods open, we hacked if they fell,
and close where if they fail, you've got nothing,
neither one of them would be an acceptable
solution. So how many firewalls do you need?
Well, it depends on the performance limitations
of the firewalls. If you have 10. Or if you
have a terabyte internet connection, chances
are you might need a dozen firewalls. 2030
to handle it, because you don't have enough
capacity on a single firewall. But you're
always going to use two. And the reason you
must use at least two until is usually enough
for most situations, you have to have a primary
backup in case one fails. But usually two
because you can put them on some pretty big
virtual machines. But at some point, depending
upon the amount of traffic, you might need
more than two, but two is a minimum. So Nandor,
so if you ever remember the T one lines and
the E one lines and this concept of multiplexing
and inverse multiplexing multiplexing, or
was when you would basically take something
and you would get a section of it per second.
And inverse multiplexing was basically like
multi linking where you put multiple links
together, man, or maybe we'll work with a
landline or ISDN. That was the Point to Point
Protocol, where you bundled 260 4k DSOs into
a single 128k Link, etc, etc. That's the same
kind of thing. It's just bundling two links
to look at one but it was a great question.
You answered that. truly fantastic question.
Any others, Chris?
That is it for now.
Okay, well, let's say this. If anybody has
any questions, let me know. And we'll do them
otherwise type AWS BGP training in the chatbox.
And if you haven't issued a like or a comment
or subscribing you're willing to please do
so. We work really, really hard to basically
create and foster an environment to help everybody
get cloud hard. So if you could let us know
that would make us feel great, with a with
an AWS BGP training and the chatbox. Meyerson
I think we can do that on one of the Tuesday
or Thursday classes. Absolutely.
Love seeing this. So we've got some from some
of the wonderful folks that are on the call.
And also let us know where you're from. I
always love knowing this. It's fantastic.
You know to see how many people are coming
from all over the world to these kinds of
sessions, so I love it. Let us know where
you're from
Arizona, I love that Maryland. CJ are over
there in Maryland. Mark can I always remember
that you're in New York. Mike, I spoke to
Christina on your behalf the other day. Let's
see who else was here. Costa Rica. I love
that. That's the place I haven't been to in
a long time. margins in the Netherlands. That's
fantastic. Dallas, Texas sigh and I haven't
been there in a while but I used to go there
almost once a week. Love it over there. Actually.
Ruth, thank you so much. I try very hard to
this makes me very happy. Lion Lord South
Carolina. That's a nice warm place. Jean Atlanta,
Georgia. I went there three times last year.
Love that area, especially Peachtree City,
etc. Anthony from Raleigh North route in rally
from San Juan. Wow. I've been to San Juan
and a long time. I had spent a lot of time
Mark in Glasgow, Scotland and absolutely loved
it. Tell us and that's right. You're in Winnipeg,
Canada. That's right. Douglas is That's right.
You have a New Jersey phone number. You told
me you were in Washington, DC. That's fantastic.
Calgary i Oh, that's really fantastic. So
induce you're in France. Fantastic. Ciao.
Hi, Mike, you wonder if there's an occasion
where your client says that multiple firewalls
are too costly, and they will want to pay
for it. Ciao. I've never seen that. And I
will tell you there was at one point, I did
have a customer that was a little concerned
about the cost of security. And I had a very
simple conversation with them. And I said,
how big of a target Do you believe you are
as what you're worth what you're doing? And
they said, huge. I sweat as the cost to tell
one person that you've been compromised. They
said $176 per person. I said, How many people
do you have in your database? And they said
a few 100,000. I said, here's the cost of
an outage, and we were upwards in the 100
million dollar range. And then they said I
said how's that million dollar security architecture
feeling bigger now? And I've never never had
a problem with that. But it's building a business
case. Elvis That's right. You're Cameroonian
I remember that. Fantastic. Queen in Peters
barrel England. That's fantastic. Og you're
probably Nigeria with that name, but I could
be wrong. I was obviously Nigerian and Maryland.
Fantastic. Man DARS over there in Dallas.
I love that. Charles freezing in Dallas. I
have heard this I have friend they're all
telling me they're Leonardo de Souza, Brazilian
in Germany. I love that William burn. Why
am I thinking you're in England? William burn.
JFK is in London. I like that. Can you Carl's
Atlanta? Yeah. 70 degrees is pretty nice.
London UK haven't been there in a few weeks
and Shawn is actually Trinidadian living over
there in Germany, which I think is great.
And I love the energy here. Saudi Arabia.
I haven't been there in a little while but
I had lots of fun the last time I was there,
Danica cloud heart and Moses, New Mexico Moses,
I think you're the pro athlete. Nice dude
and hope so. Brian McColl Wow. I grew up in
Philadelphia. Raining in Phoenix, Arizona
today. Good day for classes. I love that.
I would go march you concur freezing in Dallas?
That's right. So Abigail and Chow and some
of my students you know, we don't have school
we have a family. And last night I saw a picture
of Abigail and Chow and so many wonderful,
wonderful people. They were all getting together
and collaborating and child that melted my
heart when I saw it, so absolutely love it.
So thrilled to see that and thank you for
all your help and all that magical blue wrench
work that you're doing. Good to have you back
from Vietnam. Poon India. Fantastic. Not.
In Queen OG. Yes, you are. Fantastic. So many
people from that part of the world becoming
great cloud architects.
I saw in GW ease and Cambodia which is fantastic.
Yeah, these are those photos. This just I
see Belle wonders there. I see Eva, who's
amazing there. I see Abigail over there. There's
just so many really wonderful people there.
When I saw this last night. I was just so
happy Chris added to me. And that's what I
like to see. I like to see my students working
together from all over the world for one goal.
To get each other cloud hired and my students
whether that's chintan over there, I mean,
they're all working together. And that is
the best feeling ever. We are the United Nations
of the cloud. I speak Greek in the house,
Roberta. So you know, that's the key. We're
all from different parts of the world. Gabriel
from the from the Ontario. Robert, welcome
back. Chelsea Chow. We all missed you when
you're over there to Vietnam. quassy coming,
Georgia, I absolutely love that. And margin.
Wow. So cool. I think it's the margin there.
You're there in the Netherlands, and Gabriel's
and obviously Nigerian living in Canada. So
I love that we've got Muhammad over there
in Pakistan. I'm so happy you're passing interviews
now. Cannot and go out there and get yourself
cloud hired. So why we do everything we do?
Thank you so much, Queen OG. Over there in
Pakistan, Mohammed. That's fantastic. We had
a great time. I love this family, too. You
know, my wife asked me what's my favorite
part of what I do? I said, the family she's
like, What do you mean? I said, here that
everybody's talking together. They're working
together. It's like a dream come true. Good
to see you over there. Iowa, Maryland. So,
everyone, I want you to have a wonderful a
Mumbai, India. That's really fantastic. Thank
you so much. I don't know if they actually
posted it on Slack or not. But
yeah, it was posted in the Hangouts channel
on Slack.
Oh, that's where you found it. Yeah,
I mean, where else as Yeah, they're hanging
out.
Did another Danica Danica actually we know
we were pretty excited. Now. We now speak
English, Greek, Spanish and Portuguese are
put the gas in our organization, and we need
to add some more languages. So we're pretty
excited about those. Thank you, Martin. I
couldn't be more honored by you saying you
think the community is a reflection of your
love and teaching and guiding that our passion.
Thank you, Martin. And Ruth, you saw it on
Slack. That's great.
So I'm just going to call out the people in
Atlanta. I know that there's quite a few people
in Atlanta. If the people in Dallas could
do it. I think the people in Atlanta could
do something.
Actually, while we're at it, there's about
100 of you leftover. Any of you guys want
any specific videos if you want to give us
suggestions for YouTube videos, we'll take
them into consideration run them through my
team and see if we have the ability to make
them so are there any any particular YouTube
videos any of you guys are really searching
for if you could let us know in the chatbox
love to get others perspective, want to make
you all happy? Want to see where you're struggling
or what you need to learn. I know what I see.
But you know, really do aim to please make
everybody happy. Really want to build a family
for you guys. So you have everything you need.
And if there's nothing more to say, I will
say we have a really great day. Can I pop
the security diagram back up? I think that
could be arranged
datacenter videos, okay. Can we can arrange
some of that. One of these days I will organize
a Palm Beach meetup where anybody that wants
to come that comes to Palm Beach, we can all
maybe hang out one day I think it would be
kind of fun. Maybe I'll teach a yoga class
to a few 100 people on the beach
make it a beach day party day. Okay, so data
center shore, Ruth, I think we can make that
happen. You guys in Maryland. I love that.
Okay, well, thank you so much. CJ, for sure.
With your gray. I love this. You guys find
each other, communicate with each other and
go find a way to really build your best career.
Build yourself a network. You know, they say
your network is your net worth and truth be
told. There's a lot to be said for that. I
will tell you how I design things. Everything
I do is a team sport. I find the best security
people the best I am people. Yes. It's a separate
career. The best big data people the best
database people, best security people. I bring
them all in a room and you know what? When
you make a team, you've got a lot of people
and they work together. Wow. That's the best
results. So go out there and meet people form
relationships. Guess what you really want
to be successful for them relationships with
people that are different than you. Here's
the reason. Imagine 10 People that all grew
up in Philadelphia, where I went to school,
that all went to Temple University that all
took the same classes that all feel the same
way. Now we've got a problem, guess what?
We're all the same person, we don't have any
solutions. But I got a security person, I
got a network person, I got a data center
person. I've got this person from Greece,
this person from Brazil, this person from
Ethiopia, this person from India, different
training, different education, different backgrounds,
different career backgrounds, while you've
got solutions to the problems. So that's kind
of there. So thank you so much for all of
your kind words, I see what you're saying.
Oh, Carter, Drew, thank you so much. And yeah,
let's do it. Let's get everyone and thank
you. Robert, I'm glad you had fun. I always
have fun talking about tech. And Carter. Thank
you, Mike. We can tell we love what you do.
And Robert, thank you so much, Marge, and
it was so much fun. So thank you so much.
Thanks to the moderators with these great
blue wrenches. We love all of you and we're
so grateful for your help.
Thank you so much their roof. Okay, everyone
have a wonderful night. It was such an honor
and a privilege to spend the afternoon with
you. Please join us tomorrow on our how to
get your first thought architect job webinar.
And on Friday, please make sure you're registered
for the interview session. The interview session
will help you in so many ways. Either you
participate and get coached. Or you get to
watch and you get to see what your competition
strengths and weaknesses are. By doing this,
you'll know how to be better prepared, as
they say in the art of war. Know yourself,
know your enemy, and you'll always be victorious.
Know yourself and not your enemy. For every
win will be one loss. No, not yourself. But
know your enemy for everyone will be one loss.
Don't know yourself, don't be your enemy,
you'll always lose. So I'm bringing you the
Intel, you can actually go spy and see what
others are out there in the industry. What
others know and you know how to be the best.
So you can win that interview competition
and get Guess what? Cloud hired and you know
what Cloud paid more and cloud promoted do
the best you possibly can be? And you'll be
there. So to register for the interview session.
How do they do that Chris?
About the proper link in the chat
box will pop a link in the chat box before
we go. Register. It'd be a great time and
we will coach you so you will know exactly
how to build yourself the best career
so I've just put it in the chat box.
Okay, so there you go.
super thrilled you are here IO IO HK to say
I know we went a long time before you joined
us and it's been a real honor. And Queen thanks
so much. And Shawn cheers. So see you all
very soon. I will see well tomorrow, or the
next day whichever days you can join us